{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///datagent.js","webpack:///webpack/bootstrap 22c7e4ea23f0d18e3160","webpack:///./src/utils/index.js","webpack:///./src/classes/Hooks.class.js","webpack:///./src/classes/Method.class.js","webpack:///./src/classes/Schema.class.js","webpack:///./src/classes/Contact.class.js","webpack:///./src/classes/Remote.class.js","webpack:///./src/index.js","webpack:///./src/operations/index.js","webpack:///./src/datagent.js","webpack:///./src/classes/Model.class.js"],"names":["root","factory","exports","module","define","amd","self","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","_defineProperty","obj","key","value","writable","convert","format","arguments","length","undefined","options","defaults","data","fields","concat","keys","result","forEach","fieldName","fieldSet","isDef","formatField","type","default","to","defaultVal","val","Array","mapReceiveHook","methods","__WEBPACK_IMPORTED_MODULE_1__classes_Hooks_class__","ReceiveBehaviour","mapHooks","mapSendHook","SendBehaviour","Error","isArray","hooks","map","hookName","reduce","assign","isNew","getURL","compose","id","url","emulateIdKey","constructor","_len","list","_key","acc","fn","then","Promise","resolve","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","protoProps","staticProps","Hooks","_map","Map","operations","set","size","_ref","method","hook","isReceiveBehaviour","isSendBehaviour","indexOf","_toConsumableArray","arr","arr2","from","__WEBPACK_IMPORTED_MODULE_0__utils___","Method","queues","queue","args","ctx","reject","catch","arg","x","y","filter","schema","Schema","_fieldSet","__WEBPACK_IMPORTED_MODULE_0__Remote_class__","__WEBPACK_IMPORTED_MODULE_1__utils___","Contact","_remotes","_default_remote","remote","opts","has","RangeError","Remote","_origin","origin","params","sync","Model","__WEBPACK_IMPORTED_MODULE_0__operations___","__WEBPACK_IMPORTED_MODULE_1__datagent__","__WEBPACK_IMPORTED_MODULE_2__utils___","_asyncToGenerator","gen","apply","step","info","error","done","err","respondData","res","status","message","respose","response","scope","item","pop","formatFor","field","__WEBPACK_IMPORTED_MODULE_1__classes_Schema_class__","filterFor","getField","action","_this","regeneratorRuntime","mark","_callee","fieldVal","_ctx","_fieldVal","_ctx2","wrap","_context","prev","next","t0","sent","abrupt","stop","_x","_extends","source","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","ModelFactory","__WEBPACK_IMPORTED_MODULE_5__classes_Schema_class__","fetch","__WEBPACK_IMPORTED_MODULE_1__classes_Model_class__","find","save","delete","destroy","DataModel","_Model","contact","getPrototypeOf","initHooks","_hooks","HooksFactory","methodName","before","after","__WEBPACK_IMPORTED_MODULE_6__classes_Method_class__","getHooks","generate","ContactFactory","remotes","__WEBPACK_IMPORTED_MODULE_3__classes_Contact_class__","remoteName","index","__WEBPACK_IMPORTED_MODULE_4__classes_Remote_class__","__WEBPACK_IMPORTED_MODULE_2__classes_Hooks_class__","aboutName","addHooks","__WEBPACK_IMPORTED_MODULE_1__Contact_class__","_name","_url","_contact","_emulateIdKey","_defaults","_defaults2","_defaults3","_defaults4"],"mappings":"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","file":"datagent.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"datagent\"] = factory();\n\telse\n\t\troot[\"datagent\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"datagent\"] = factory();\n\telse\n\t\troot[\"datagent\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 6);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"h\", function() { return isNew; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return getURL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"g\", function() { return isDef; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return isArray; });\n/* unused harmony export isNumber */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return defaults; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return compose; });\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = convert;\n/* unused harmony export formatField */\n/* harmony export (immutable) */ __webpack_exports__[\"i\"] = mapReceiveHook;\n/* harmony export (immutable) */ __webpack_exports__[\"j\"] = mapSendHook;\n/* unused harmony export mapHooks */\n/* unused harmony export awaitTo */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__classes_Method_class__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__classes_Hooks_class__ = __webpack_require__(1);\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\nvar isNew = function isNew(data) {\n    return !isDef(data.id) || !data.id;\n};\nvar getURL = function getURL(url, id, emulateIdKey) {\n    return emulateIdKey ? url : url + (isDef(id) ? '/' + id : '');\n};\nvar isDef = function isDef(val) {\n    return typeof val !== 'undefined';\n};\nvar isArray = function isArray(val) {\n    return val.constructor === Array;\n};\nvar isNumber = function isNumber(val) {\n    return val.constructor === Number;\n};\nvar defaults = function defaults(obj) {\n    var defaults = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var merge = function merge(defaults, obj) {\n        return defaults.constructor === Array ? defaults.concat(obj) : Object.assign(defaults, obj);\n    };\n    return isDef(obj) ? merge(defaults, obj) : defaults;\n};\n\nvar compose = function compose() {\n    for (var _len = arguments.length, list = Array(_len), _key = 0; _key < _len; _key++) {\n        list[_key] = arguments[_key];\n    }\n\n    return function (acc) {\n        return list.reduce(function (acc, fn) {\n            return acc.then(fn);\n        }, Promise.resolve(acc));\n    };\n};\n\n/**\n * format code like that:\n * ```\n * {\n *   \"id\": { type: Number, default: null },\n *   \"nickname\": { type: String, default: \"\" },\n *   \"emial\": { type: String, default:\"\" },\n *   \"password\": { type: String, default:\"\" }\n * }\n * ```\n */\nfunction convert() {\n    var format = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var options = arguments[1];\n\n    options = defaults(options, { format: false });\n    return function () {\n        var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [].concat(Object.keys(data), Object.keys(format));\n\n        var result = {};\n        fields.forEach(function (fieldName) {\n            var fieldSet = format[fieldName];\n            if (isDef(data[fieldName])) result[fieldName] = data[fieldName];\n            if (options.format && isDef(fieldSet)) result[fieldName] = formatField(fieldSet.type, fieldSet.default)(data[fieldName]);\n        });\n        return result;\n    };\n}\n\nfunction formatField(to, defaultVal) {\n    return function (val) {\n        var result = void 0;\n        if (typeof defaultVal === \"function\") defaultVal = defaultVal();\n        if (val === null || !isDef(val)) result = defaultVal;else result = to(val);\n        if (to === Array) return val || [];\n        if (val === defaultVal) return val;\n        return result;\n    };\n}\n\nfunction mapReceiveHook(methods, options) {\n    options = defaults(options, __WEBPACK_IMPORTED_MODULE_1__classes_Hooks_class__[\"a\" /* default */].ReceiveBehaviour);\n    return mapHooks(methods, options);\n}\nfunction mapSendHook(methods, options) {\n    options = defaults(options, __WEBPACK_IMPORTED_MODULE_1__classes_Hooks_class__[\"a\" /* default */].SendBehaviour);\n    return mapHooks(methods, options);\n}\nfunction mapHooks(methods) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    if (!isDef(options.methods)) throw new Error('The options must have methods parameter in mapHooks');\n    if (!isArray(options.methods)) throw new Error('The options.methods must be Array in mapHooks');\n    if (!isDef(options.hooks)) throw new Error('The options must have hooks parameter in mapHooks');\n    if (!isArray(options.hooks)) throw new Error('The options.hooks must be Array in mapHooks');\n    var result = options.methods.map(function (hookName) {\n        return _defineProperty({}, hookName, {});\n    }).reduce(Object.assign);\n    Object.keys(result).forEach(function (hookName) {\n        result[hookName] = options.hooks.map(function (hookName) {\n            return _defineProperty({}, hookName, methods);\n        }).reduce(Object.assign);\n    });\n    return result;\n}\nfunction awaitTo(promise) {\n    return promise.then(function (data) {\n        return [null, data];\n    }).catch(function (err) {\n        return [err];\n    });\n}\n\n/* harmony default export */ __webpack_exports__[\"c\"] = ({\n    isNew: isNew,\n    getURL: getURL,\n    isDef: isDef,\n    defaults: defaults,\n    convert: convert,\n    compose: compose,\n    mapSendHook: mapSendHook,\n    mapReceiveHook: mapReceiveHook\n});\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Hooks = function () {\n    function Hooks() {\n        _classCallCheck(this, Hooks);\n\n        this._map = new Map();\n    }\n\n    _createClass(Hooks, [{\n        key: 'addHooks',\n        value: function addHooks(key, operations) {\n            return this._map.set(key, operations);\n        }\n    }, {\n        key: 'getHooks',\n        value: function getHooks(key) {\n            return this._map.get(key);\n        }\n    }, {\n        key: 'each',\n        value: function each(fn) {\n            return this._map.forEach(fn);\n        }\n    }, {\n        key: 'length',\n        get: function get() {\n            return this._map.size;\n        }\n    }], [{\n        key: 'parse',\n        value: function parse(_ref) {\n            var method = _ref.method,\n                hook = _ref.hook;\n            var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'method';\n\n            var result = method + ':' + hook;\n            if (type === 'behaviour') {\n                if (Hooks.isReceiveBehaviour(method, hook)) result = 'receive';\n                if (Hooks.isSendBehaviour(method, hook)) result = 'send';\n            }\n            return result;\n        }\n    }, {\n        key: 'isReceiveBehaviour',\n        value: function isReceiveBehaviour(method, hook) {\n            if (typeof method !== 'string') throw new TypeError('The method must be string in isReceiveBehaviour()');\n            if (typeof hook !== 'string') throw new TypeError('The hook must be string in isReceiveBehaviour()');\n            return Hooks.ReceiveBehaviour.methods.indexOf(method) > -1 && Hooks.ReceiveBehaviour.hooks.indexOf(hook) > -1;\n        }\n    }, {\n        key: 'isSendBehaviour',\n        value: function isSendBehaviour(method, hook) {\n            if (typeof method !== 'string') throw new TypeError('The method must be string in isSendBehaviour()');\n            if (typeof hook !== 'string') throw new TypeError('The hook must be string in isSendBehaviour()');\n            return Hooks.SendBehaviour.methods.indexOf(method) > -1 && Hooks.SendBehaviour.hooks.indexOf(hook) > -1;\n        }\n    }, {\n        key: 'ReceiveBehaviour',\n        get: function get() {\n            return {\n                methods: ['fetch', 'find'],\n                hooks: ['after']\n            };\n        }\n    }, {\n        key: 'SendBehaviour',\n        get: function get() {\n            return {\n                methods: ['save'],\n                hooks: ['before']\n            };\n        }\n    }]);\n\n    return Hooks;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Hooks);\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils___ = __webpack_require__(0);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// import compose from 'koa-compose';\n\n\n/**\n * queue call function like that:\n * ```\n * (ctx, next) => {\n *   // ctx is content in all queue functions, like koa.\n *   // ctx have $model, arge, result fields\n *   // ======================================================\n *   // ctx.$model is function scope\n *   // ctx.arge is function arguments\n *   // ctx.result is this function result\n *   next();\n * }\n * ```\n * \n * run function return Promise data pattern like that:\n * ```\n * let err, result;\n * [err, result] = Queue.run($model, args, queues);\n * if(err) throw err;\n * console.log(result);\n * ```\n * more detail look test file.\n */\n\nvar Method = function () {\n    function Method() {\n        _classCallCheck(this, Method);\n    }\n\n    _createClass(Method, null, [{\n        key: 'generate',\n        value: function generate(queues) {\n            var queue = __WEBPACK_IMPORTED_MODULE_0__utils___[\"a\" /* compose */].apply(undefined, _toConsumableArray(queues));\n            return function (args) {\n                var ctx = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n                ctx = Object.assign(ctx, { args: args });\n                return new Promise(function (resolve, reject) {\n                    queue(ctx).then(function (ctx) {\n                        return resolve(ctx.result);\n                    }).catch(reject);\n                });\n            };\n        }\n    }, {\n        key: 'concat',\n        value: function concat() {\n            for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n                args[_key] = arguments[_key];\n            }\n\n            return args.map(function (arg) {\n                return Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"d\" /* defaults */])(arg, []);\n            }).reduce(function (x, y) {\n                return x.concat(y);\n            });\n        }\n    }]);\n\n    return Method;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Method);\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export format */\n/* unused harmony export filter */\n/* unused harmony export schema */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils___ = __webpack_require__(0);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar _format = function _format(data, fieldSet) {\n    return Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"b\" /* convert */])(fieldSet, { format: true })(data);\n};\n\nvar _filter = function _filter(data, fields) {\n    return Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"b\" /* convert */])()(data, fields);\n};\n\nvar schema = function schema(fieldSet) {\n    return Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"b\" /* convert */])(fieldSet, { format: true })({}, Object.keys(fieldSet));\n};\n\nvar Schema = function () {\n    function Schema(fieldSet) {\n        _classCallCheck(this, Schema);\n\n        this._fieldSet = fieldSet;\n    }\n\n    _createClass(Schema, [{\n        key: \"format\",\n        value: function format(data) {\n            return _format(data, this._fieldSet);\n        }\n    }, {\n        key: \"filter\",\n        value: function filter(data) {\n            var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Object.keys(this._fieldSet);\n\n            return _filter(data, fields);\n        }\n    }, {\n        key: \"default\",\n        value: function _default() {\n            return schema(this._fieldSet);\n        }\n    }, {\n        key: \"fieldSet\",\n        get: function get() {\n            return this._fieldSet;\n        }\n\n        // static\n\n    }], [{\n        key: \"format\",\n        value: function format(data, fieldSet) {\n            return _format(data, fieldSet);\n        }\n    }, {\n        key: \"filter\",\n        value: function filter(data, fields) {\n            return _filter(data, fields);\n        }\n    }, {\n        key: \"default\",\n        value: function _default(fieldSet) {\n            return schema(fieldSet);\n        }\n    }]);\n\n    return Schema;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Schema);\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Remote_class__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils___ = __webpack_require__(0);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar Contact = function () {\n    function Contact() {\n        _classCallCheck(this, Contact);\n\n        this._remotes = {};\n        this._default_remote = \"\";\n    }\n\n    _createClass(Contact, [{\n        key: 'remote',\n        value: function remote() {\n            var name = arguments.length <= 0 ? undefined : arguments[0],\n                remote = arguments.length <= 1 ? undefined : arguments[1],\n                opts = Object(__WEBPACK_IMPORTED_MODULE_1__utils___[\"d\" /* defaults */])(arguments.length <= 2 ? undefined : arguments[2], { default: false });\n            if (arguments.length >= 2) {\n                // set remote\n                if (typeof name !== 'string') throw new TypeError('The first arguments must be String');\n                if (remote.constructor !== __WEBPACK_IMPORTED_MODULE_0__Remote_class__[\"a\" /* default */]) throw new TypeError('The second arguments must be Remote');\n                this._remotes[name] = remote;\n                if (opts.default || this.length == 1) this.default(name);\n            } else {\n                name = name ? name : this._default_remote;\n                if (!this.has(name)) throw new RangeError('Remote does not exist ' + name + ' in remote()');\n                // get remote\n                remote = this._remotes[name];\n                return remote;\n            }\n        }\n    }, {\n        key: 'default',\n        value: function _default(name) {\n            if (typeof name !== 'string') throw new TypeError('The name must be string in default()');\n            if (!this.has(name)) throw new RangeError('Remote does not exist ' + name + ' in default()');\n            this._default_remote = name;\n        }\n    }, {\n        key: 'has',\n        value: function has(name) {\n            return Object.keys(this._remotes).indexOf(name) !== -1;\n        }\n    }, {\n        key: 'length',\n        get: function get() {\n            return Object.keys(this._remotes).length;\n        }\n    }]);\n\n    return Contact;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Contact);\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Remote = function () {\n    function Remote(options) {\n        _classCallCheck(this, Remote);\n\n        this._origin = options.origin;\n    }\n\n    _createClass(Remote, [{\n        key: 'get',\n        value: function get(url, params) {\n            return this.sync({\n                url: url,\n                method: 'GET',\n                params: params\n            });\n        }\n    }, {\n        key: 'post',\n        value: function post(url, data) {\n            return this.sync({\n                method: 'POST',\n                url: url,\n                data: data\n            });\n        }\n    }, {\n        key: 'put',\n        value: function put(url, data) {\n            return this.sync({\n                method: 'PUT',\n                url: url,\n                data: data\n            });\n        }\n    }, {\n        key: 'patch',\n        value: function patch(url, data) {\n            return this.sync({\n                method: 'PATCH',\n                url: url,\n                data: data\n            });\n        }\n    }, {\n        key: 'delete',\n        value: function _delete(url, data) {\n            return this.sync({\n                method: 'DELETE',\n                url: url,\n                data: data\n            });\n        }\n    }, {\n        key: 'sync',\n        value: function sync(options) {\n            return this._origin(options);\n        }\n    }, {\n        key: 'origin',\n        get: function get() {\n            return this._origin;\n        }\n    }]);\n\n    return Remote;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Remote);\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Model\", function() { return Model; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Contact\", function() { return Contact; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__operations___ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__datagent__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils___ = __webpack_require__(0);\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, \"Hooks\", function() { return __WEBPACK_IMPORTED_MODULE_0__operations___; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"mapReceiveHook\", function() { return __WEBPACK_IMPORTED_MODULE_2__utils___[\"i\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"mapSendHook\", function() { return __WEBPACK_IMPORTED_MODULE_2__utils___[\"j\"]; });\n\n\n\n\nvar Model = __WEBPACK_IMPORTED_MODULE_1__datagent__[\"a\" /* default */].Model,\n    Contact = __WEBPACK_IMPORTED_MODULE_1__datagent__[\"a\" /* default */].Contact;\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    Model: Model,\n    Contact: Contact,\n    Hooks: __WEBPACK_IMPORTED_MODULE_0__operations___,\n    mapReceiveHook: __WEBPACK_IMPORTED_MODULE_2__utils___[\"i\" /* mapReceiveHook */],\n    mapSendHook: __WEBPACK_IMPORTED_MODULE_2__utils___[\"j\" /* mapSendHook */]\n\n    //import Datagent from 'datagent';\n    // Datagent.Model\n    // Datagent.Contact\n    // Datagent.Hooks.respondData\n    // Datagent.Hooks.format\n    // Datagent.Hooks.formatFor\n    // Datagent.Hooks.filter\n    // Datagent.Hooks.filterFor\n    // Datagent.mapReceiveHook\n    // Datagent.mapSendHook\n\n    //const Datagent = require('datagent');\n    // Datagent.Model\n    // Datagent.Contact\n    // Datagent.Hooks.respondData\n    // Datagent.Hooks.format\n    // Datagent.Hooks.formatFor\n    // Datagent.Hooks.filter\n    // Datagent.Hooks.filterFor\n    // Datagent.mapReceiveHook\n    // Datagent.mapSendHook\n\n});\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (immutable) */ __webpack_exports__[\"respondData\"] = respondData;\n/* harmony export (immutable) */ __webpack_exports__[\"format\"] = format;\n/* harmony export (immutable) */ __webpack_exports__[\"filter\"] = filter;\n/* harmony export (immutable) */ __webpack_exports__[\"formatFor\"] = formatFor;\n/* harmony export (immutable) */ __webpack_exports__[\"filterFor\"] = filterFor;\n/* harmony export (immutable) */ __webpack_exports__[\"getField\"] = getField;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils___ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__classes_Schema_class__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__classes_Hooks_class__ = __webpack_require__(1);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\n\n\n\nfunction respondData() {\n    return function (ctx) {\n        var res = ctx.result;\n        if (res.status < 200) {\n            var err = new Error(res.message);\n            err.respose = res.response;\n            throw err;\n        };\n        ctx.result = res.data;\n        return Promise.resolve(ctx);\n    };\n}\n\nfunction format(schema) {\n    return function (ctx) {\n        schema = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(schema) ? schema : ctx.scope.schema;\n        switch (ctx.hook) {\n            case 'after':\n                if (Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(ctx.result) && Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"f\" /* isArray */])(ctx.result)) {\n                    ctx.result = ctx.result.map(function (item) {\n                        return schema.format(item);\n                    });\n                } else {\n                    ctx.result = schema.format(ctx.result);\n                }\n                break;\n            case 'before':\n                var data = ctx.args.pop();\n                ctx.args = [schema.format(data)].concat(_toConsumableArray(ctx.args));\n                break;\n        }\n        return Promise.resolve(ctx);\n    };\n}\n\nfunction filter(fields) {\n    return function (ctx) {\n        switch (ctx.hook) {\n            case 'after':\n                if (Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(ctx.result) && Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"f\" /* isArray */])(ctx.result)) {\n                    ctx.result = ctx.result.map(function (item) {\n                        return ctx.scope.schema.filter(item, fields);\n                    });\n                } else {\n                    ctx.result = ctx.scope.schema.filter(ctx.result, fields);\n                }\n                break;\n            case 'before':\n                var data = ctx.args.pop();\n                ctx.args = [ctx.scope.schema.filter(data, fields)].concat(_toConsumableArray(ctx.args));\n                break;\n        }\n        return Promise.resolve(ctx);\n    };\n}\n\nfunction formatFor(field, schema) {\n    return function (ctx) {\n        schema = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(schema) ? schema : ctx.scope.schema;\n        switch (ctx.hook) {\n            case 'after':\n                if (Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"f\" /* isArray */])(ctx.result)) {\n                    ctx.result = ctx.result.map(function (item) {\n                        item[field] = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(item[field]) ? __WEBPACK_IMPORTED_MODULE_1__classes_Schema_class__[\"a\" /* default */].format(item[field], schema.fieldSet) : schema.default();\n                        return item;\n                    });\n                } else {\n                    ctx.result[field] = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(ctx.result[field]) ? __WEBPACK_IMPORTED_MODULE_1__classes_Schema_class__[\"a\" /* default */].format(ctx.result[field], schema.fieldSet) : schema.default();\n                }\n                break;\n            case 'before':\n                var data = ctx.args.pop();\n                if (Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(data[field])) data[field] = __WEBPACK_IMPORTED_MODULE_1__classes_Schema_class__[\"a\" /* default */].format(data[field], schema.fieldSet);else data[field] = schema.default();\n                ctx.args = [data].concat(_toConsumableArray(ctx.args));\n                break;\n        }\n        return Promise.resolve(ctx);\n    };\n}\n\nfunction filterFor(field, fields) {\n    return function (ctx) {\n        switch (ctx.hook) {\n            case 'after':\n                if (Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"f\" /* isArray */])(ctx.result)) {\n                    ctx.result = ctx.result.map(function (item) {\n                        item[field] = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(item[field]) ? __WEBPACK_IMPORTED_MODULE_1__classes_Schema_class__[\"a\" /* default */].filter(item[field], fields) : item[field];\n                        return item;\n                    });\n                } else {\n                    ctx.result[field] = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(ctx.result[field]) ? __WEBPACK_IMPORTED_MODULE_1__classes_Schema_class__[\"a\" /* default */].filter(ctx.result[field], fields) : ctx.result[field];\n                }\n                break;\n            case 'before':\n                var data = ctx.args.pop();\n                if (Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(data[field])) data[field] = __WEBPACK_IMPORTED_MODULE_1__classes_Schema_class__[\"a\" /* default */].filter(data[field], fields);\n                ctx.args = [data].concat(_toConsumableArray(ctx.args));\n                break;\n        }\n        return Promise.resolve(ctx);\n    };\n}\n\nfunction getField(fieldName, action) {\n    var _this = this;\n\n    return function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(ctx) {\n            var fieldVal, _ctx, data, _fieldVal, _ctx2;\n\n            return regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                    switch (_context.prev = _context.next) {\n                        case 0:\n                            _context.t0 = ctx.hook;\n                            _context.next = _context.t0 === 'after' ? 3 : _context.t0 === 'before' ? 10 : 19;\n                            break;\n\n                        case 3:\n                            if (!Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(ctx.result[fieldName])) {\n                                _context.next = 9;\n                                break;\n                            }\n\n                            fieldVal = ctx.result[fieldName];\n                            _context.next = 7;\n                            return action(_extends({}, ctx, { result: fieldVal }));\n\n                        case 7:\n                            _ctx = _context.sent;\n\n                            ctx.result[fieldName] = _ctx.result;\n\n                        case 9:\n                            return _context.abrupt(\"break\", 19);\n\n                        case 10:\n                            data = ctx.args.pop();\n\n                            if (!Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(data[fieldName])) {\n                                _context.next = 18;\n                                break;\n                            }\n\n                            _fieldVal = data[fieldName];\n                            _context.next = 15;\n                            return action(_extends({}, ctx, { args: [_fieldVal] }));\n\n                        case 15:\n                            _ctx2 = _context.sent;\n\n                            data[fieldName] = _ctx2.args[0];\n                            ctx.args = [data].concat(_toConsumableArray(ctx.args));\n\n                        case 18:\n                            return _context.abrupt(\"break\", 19);\n\n                        case 19:\n                            return _context.abrupt(\"return\", Promise.resolve(ctx));\n\n                        case 20:\n                        case \"end\":\n                            return _context.stop();\n                    }\n                }\n            }, _callee, _this);\n        }));\n\n        return function (_x) {\n            return _ref.apply(this, arguments);\n        };\n    }();\n}\n\n/***/ }),\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export ModelFactory */\n/* unused harmony export ContactFactory */\n/* unused harmony export HooksFactory */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils___ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__classes_Model_class__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__classes_Hooks_class__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__classes_Contact_class__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__classes_Remote_class__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__classes_Schema_class__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__classes_Method_class__ = __webpack_require__(2);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\nfunction ModelFactory(options) {\n    var schema = new __WEBPACK_IMPORTED_MODULE_5__classes_Schema_class__[\"a\" /* default */](options.fields);\n    var methods = _extends({\n        'fetch': __WEBPACK_IMPORTED_MODULE_1__classes_Model_class__[\"a\" /* default */].prototype.fetch,\n        'find': __WEBPACK_IMPORTED_MODULE_1__classes_Model_class__[\"a\" /* default */].prototype.find,\n        'save': __WEBPACK_IMPORTED_MODULE_1__classes_Model_class__[\"a\" /* default */].prototype.save,\n        'delete': __WEBPACK_IMPORTED_MODULE_1__classes_Model_class__[\"a\" /* default */].prototype.delete,\n        'destroy': __WEBPACK_IMPORTED_MODULE_1__classes_Model_class__[\"a\" /* default */].prototype.destroy\n    }, options.methods);\n    //RichModel\n\n    var DataModel = function (_Model) {\n        _inherits(DataModel, _Model);\n\n        function DataModel(opts) {\n            _classCallCheck(this, DataModel);\n\n            opts = __WEBPACK_IMPORTED_MODULE_0__utils___[\"c\" /* default */].defaults(opts, {\n                name: options.name,\n                url: options.url,\n                contact: options.contact\n            });\n\n            var _this = _possibleConstructorReturn(this, (DataModel.__proto__ || Object.getPrototypeOf(DataModel)).call(this, opts));\n\n            _this.initHooks(options.hooks);\n            return _this;\n        }\n\n        _createClass(DataModel, [{\n            key: 'initHooks',\n            value: function initHooks(options) {\n                this._hooks = HooksFactory(options);\n            }\n        }, {\n            key: 'schema',\n            get: function get() {\n                return schema;\n            }\n        }], [{\n            key: 'schema',\n            get: function get() {\n                return schema;\n            }\n        }]);\n\n        return DataModel;\n    }(__WEBPACK_IMPORTED_MODULE_1__classes_Model_class__[\"a\" /* default */]);\n\n    Object.keys(methods).forEach(function (methodName) {\n        // all hook action magic in here.\n        DataModel.prototype[methodName] = function () {\n            for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n                args[_key] = arguments[_key];\n            }\n\n            var opts = __WEBPACK_IMPORTED_MODULE_0__utils___[\"c\" /* default */].defaults(args[args.length - 1]);\n            var hooks = __WEBPACK_IMPORTED_MODULE_0__utils___[\"c\" /* default */].defaults(opts.hooks, { before: [], after: [] });\n\n            var before = __WEBPACK_IMPORTED_MODULE_6__classes_Method_class__[\"a\" /* default */].concat(hooks.before, this._hooks.getHooks(methodName + '::before'));\n            var after = __WEBPACK_IMPORTED_MODULE_6__classes_Method_class__[\"a\" /* default */].concat(this._hooks.getHooks(methodName + '::after'), hooks.after);\n\n            var method = function method(ctx) {\n                return methods[methodName].apply(ctx.scope, ctx.args).then(function (data) {\n                    ctx.hook = 'after';\n                    ctx.result = data;\n                    return Promise.resolve(ctx);\n                });\n            };\n            var ctx = { scope: this, method: methodName, hook: 'before' };\n\n            return __WEBPACK_IMPORTED_MODULE_6__classes_Method_class__[\"a\" /* default */].generate([].concat(_toConsumableArray(before), [method], _toConsumableArray(after)))(args, ctx);\n        };\n    });\n\n    return DataModel;\n}\n\nfunction ContactFactory() {\n    var remotes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var defaults = arguments[1];\n\n    var contact = new __WEBPACK_IMPORTED_MODULE_3__classes_Contact_class__[\"a\" /* default */]();\n    Object.keys(remotes).forEach(function (remoteName, index) {\n        contact.remote(remoteName, new __WEBPACK_IMPORTED_MODULE_4__classes_Remote_class__[\"a\" /* default */]({ origin: remotes[remoteName] }), { default: index == 0 });\n    });\n    if (defaults) contact.default(defaults);\n    return contact;\n}\n\nfunction HooksFactory(options) {\n    var hooks = new __WEBPACK_IMPORTED_MODULE_2__classes_Hooks_class__[\"a\" /* default */]();\n    //解析hooks的逻辑，并添加hook记录\n\n    Object.keys(__WEBPACK_IMPORTED_MODULE_0__utils___[\"c\" /* default */].defaults(options)).forEach(function (hookName) {\n        var hook = options[hookName];\n        Object.keys(hook).forEach(function (aboutName) {\n            hooks.addHooks(hookName + '::' + aboutName, hook[aboutName]);\n        });\n    });\n\n    return hooks;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    Model: ModelFactory,\n    Contact: ContactFactory,\n    Hooks: HooksFactory\n});\n\n/***/ }),\n/* 9 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils___ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Contact_class__ = __webpack_require__(4);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar Model = function () {\n    function Model(options) {\n        _classCallCheck(this, Model);\n\n        var name = this._name = options.name;\n        if (!Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(name) || typeof name != 'string') {\n            throw new Error('options.name must be string in Model');\n        }\n        this._url = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(options.url) ? options.url : '/' + name;\n        if (!Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(options.contact) || options.contact.constructor != __WEBPACK_IMPORTED_MODULE_1__Contact_class__[\"a\" /* default */]) {\n            throw new Error('options.contact must be Contact class in Model');\n        }\n        this._contact = options.contact;\n        this._emulateIdKey = typeof options.emulateIdKey === 'undefined' ? false : options.emulateIdKey;\n    }\n\n    _createClass(Model, [{\n        key: 'fetch',\n        value: function fetch(params, opts) {\n            var _defaults = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"d\" /* defaults */])(opts),\n                origin = _defaults.origin;\n\n            return this.remote(origin).get(this._url, params);\n        }\n    }, {\n        key: 'find',\n        value: function find(params, opts) {\n            var _defaults2 = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"d\" /* defaults */])(opts),\n                origin = _defaults2.origin;\n\n            var id = params.id;\n\n            if (this._emulateIdKey) params[this._emulateIdKey] = params.id;else delete params.id;\n            return this.remote(origin).get(Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"e\" /* getURL */])(this._url, id, this._emulateIdKey), params);\n        }\n    }, {\n        key: 'save',\n        value: function save(data, opts) {\n            var _defaults3 = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"d\" /* defaults */])(opts),\n                origin = _defaults3.origin;\n\n            var id = data.id;\n\n            var url = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"e\" /* getURL */])(this._url, id, this._emulateIdKey);\n            return this.remote(origin)[Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"h\" /* isNew */])(data) ? 'post' : 'put'](url, data);\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy(params, opts) {\n            var _defaults4 = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"d\" /* defaults */])(opts),\n                origin = _defaults4.origin;\n\n            var id = params.id;\n\n            if (this._emulateIdKey) params[this._emulateIdKey] = params.id;else delete params.id;\n            return this.remote(origin).delete(Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"e\" /* getURL */])(this._url, id, this._emulateIdKey), params);\n        }\n    }, {\n        key: 'delete',\n        value: function _delete() {\n            return this.destroy.apply(this, arguments);\n        }\n    }, {\n        key: 'remote',\n        value: function remote(name) {\n            return this._contact.remote(name);\n        }\n    }, {\n        key: 'contact',\n        get: function get() {\n            return this._contact;\n        }\n    }]);\n\n    return Model;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Model);\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// datagent.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 22c7e4ea23f0d18e3160","import Method from '../classes/Method.class';\nimport Hooks from '../classes/Hooks.class';\n\nexport const isNew = data => !isDef(data.id) || !data.id;\nexport const getURL = (url, id, emulateIdKey) => emulateIdKey ? url : (url + (isDef(id) ? `/${id}` : ''));\nexport const isDef = val => typeof val !== 'undefined';\nexport const isArray = val => val.constructor === Array;\nexport const isNumber = val => val.constructor === Number;\nexport const defaults = (obj, defaults = {}) =>{\n    const merge = (defaults, obj) => defaults.constructor === Array ? defaults.concat(obj) : Object.assign(defaults, obj);\n    return isDef(obj) ? merge(defaults, obj) : defaults;\n};\n\nexport const compose = (...list) => acc => list.reduce((acc, fn) => acc.then(fn), Promise.resolve(acc));\n\n/**\n * format code like that:\n * ```\n * {\n *   \"id\": { type: Number, default: null },\n *   \"nickname\": { type: String, default: \"\" },\n *   \"emial\": { type: String, default:\"\" },\n *   \"password\": { type: String, default:\"\" }\n * }\n * ```\n */\nexport function convert(format = {}, options){\n    options = defaults(options, { format: false });\n    return (data = {}, fields = [].concat(Object.keys(data), Object.keys(format)))=>{\n        const result = {};\n        fields.forEach(fieldName => {\n            const fieldSet = format[fieldName];\n            if (isDef(data[fieldName])) result[fieldName] = data[fieldName];\n            if (options.format && isDef(fieldSet)) result[fieldName] = formatField(fieldSet.type, fieldSet.default)(data[fieldName]);\n        });\n        return result;\n    }\n}\n\nexport function formatField(to, defaultVal){\n    return val=>{\n        let result;\n        if (typeof defaultVal === \"function\") defaultVal = defaultVal();\n        if (val === null || !isDef(val)) result = defaultVal;\n        else result = to(val);\n        if (to === Array) return val || [];\n        if (val === defaultVal) return val;\n        return result;\n    }\n}\n\nexport function mapReceiveHook(methods, options){\n    options = defaults(options, Hooks.ReceiveBehaviour);\n    return mapHooks(methods, options)\n}\nexport function mapSendHook(methods, options) {\n    options = defaults(options, Hooks.SendBehaviour);\n    return mapHooks(methods, options)\n}\nexport function mapHooks(methods, options={}){\n    if (!isDef(options.methods)) throw new Error('The options must have methods parameter in mapHooks');\n    if (!isArray(options.methods)) throw new Error('The options.methods must be Array in mapHooks');\n    if (!isDef(options.hooks)) throw new Error('The options must have hooks parameter in mapHooks');\n    if (!isArray(options.hooks)) throw new Error('The options.hooks must be Array in mapHooks');\n    const result = options.methods.map(hookName => { return { [hookName]: {} } }).reduce(Object.assign);\n    Object.keys(result).forEach(hookName=>{\n        result[hookName] = options.hooks.map(hookName => { return { [hookName]: methods } }).reduce(Object.assign);\n    })\n    return result;\n}\nexport function awaitTo(promise) {\n    return promise.then(data => {\n        return [null, data];\n    }).catch(err => [err]);\n}\n\nexport default {\n    isNew,\n    getURL,\n    isDef,\n    defaults,\n    convert,\n    compose,\n    mapSendHook,\n    mapReceiveHook\n};\n\n\n// WEBPACK FOOTER //\n// ./src/utils/index.js","class Hooks {\n    constructor() {\n        this._map = new Map();\n    }\n    addHooks(key, operations) {\n        return this._map.set(key, operations);\n    }\n    getHooks(key) {\n        return this._map.get(key);\n    }\n    each(fn) {\n        return this._map.forEach(fn);\n    }\n    get length() {\n        return this._map.size;\n    }\n\n    static parse({ method, hook }, type = 'method'){\n        let result = `${method}:${hook}`;\n        if (type === 'behaviour') {\n            if (Hooks.isReceiveBehaviour(method, hook)) result = 'receive';\n            if (Hooks.isSendBehaviour(method, hook)) result = 'send';\n        }\n        return result;\n    }\n\n    static get ReceiveBehaviour(){\n        return {\n            methods: ['fetch','find'],\n            hooks: ['after']\n        }\n    }\n    static get SendBehaviour() {\n        return {\n            methods: ['save'],\n            hooks: ['before']\n        }\n    }\n\n    static isReceiveBehaviour(method, hook){\n        if (typeof method !== 'string') throw new TypeError('The method must be string in isReceiveBehaviour()');\n        if (typeof hook !== 'string') throw new TypeError('The hook must be string in isReceiveBehaviour()');\n        return Hooks.ReceiveBehaviour.methods.indexOf(method) > -1 && Hooks.ReceiveBehaviour.hooks.indexOf(hook) > -1;\n    }\n\n    static isSendBehaviour(method, hook) {\n        if (typeof method !== 'string') throw new TypeError('The method must be string in isSendBehaviour()');\n        if (typeof hook !== 'string') throw new TypeError('The hook must be string in isSendBehaviour()');\n        return Hooks.SendBehaviour.methods.indexOf(method) > -1 && Hooks.SendBehaviour.hooks.indexOf(hook) > -1;\n    }\n}\n\nexport default Hooks;\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Hooks.class.js","// import compose from 'koa-compose';\nimport { defaults, compose } from '../utils/';\n\n/**\n * queue call function like that:\n * ```\n * (ctx, next) => {\n *   // ctx is content in all queue functions, like koa.\n *   // ctx have $model, arge, result fields\n *   // ======================================================\n *   // ctx.$model is function scope\n *   // ctx.arge is function arguments\n *   // ctx.result is this function result\n *   next();\n * }\n * ```\n * \n * run function return Promise data pattern like that:\n * ```\n * let err, result;\n * [err, result] = Queue.run($model, args, queues);\n * if(err) throw err;\n * console.log(result);\n * ```\n * more detail look test file.\n */\n\nclass Method {\n    static generate(queues) {\n        const queue = compose(...queues);\n        return (args, ctx={}) => {\n            ctx = Object.assign(ctx, {args});\n            return new Promise((resolve, reject) => {\n                queue(ctx)\n                    .then(ctx=>resolve(ctx.result))\n                    .catch(reject);\n            });\n        }\n    }\n    static concat(...args){\n        return args.map(arg => defaults(arg, [])).reduce((x,y)=>x.concat(y));\n    }\n}\n\nexport default Method;\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Method.class.js","import { convert } from \"../utils/\";\n\nexport const format = (data, fieldSet) => convert(fieldSet, { format:true })(data);\nexport const filter = (data, fields) => convert()(data, fields);\nexport const schema = fieldSet => convert(fieldSet, { format: true })({}, Object.keys(fieldSet));\n\nexport default class Schema {\n    constructor(fieldSet) {\n        this._fieldSet = fieldSet;\n    }\n    format(data) {\n        return format(data, this._fieldSet);\n    }\n    filter(data, fields = Object.keys(this._fieldSet)){\n        return filter(data, fields);\n    }\n    default(){\n        return schema(this._fieldSet);\n    }\n    get fieldSet() {\n        return this._fieldSet;\n    }\n\n    // static\n    static format(data, fieldSet){\n        return format(data, fieldSet);\n    }\n    static filter(data, fields) {\n        return filter(data, fields);\n    }\n    static default(fieldSet) {\n        return schema(fieldSet);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Schema.class.js","import Remote from './Remote.class';\nimport { defaults } from '../utils/';\n\nexport default class Contact {\n    constructor() {\n        this._remotes = {};\n        this._default_remote = \"\";\n    }\n    remote(...args) {\n        let name = args[0],\n            remote = args[1],\n            opts = defaults(args[2], { default: false });\n        if (args.length >= 2) {\n            // set remote\n            if (typeof name !== 'string') throw new TypeError('The first arguments must be String');\n            if (remote.constructor !== Remote) throw new TypeError('The second arguments must be Remote');\n            this._remotes[name] = remote;\n            if (opts.default || this.length == 1) this.default(name);\n        } else {\n            name = name ? name : this._default_remote;\n            if (!this.has(name)) throw new RangeError(`Remote does not exist ${name} in remote()`);\n            // get remote\n            remote = this._remotes[name];\n            return remote;\n        }\n    }\n    default(name) {\n        if(typeof name !== 'string') throw new TypeError('The name must be string in default()');\n        if (!this.has(name)) throw new RangeError(`Remote does not exist ${name} in default()`);\n        this._default_remote = name;\n    }\n    has(name) {\n        return Object.keys(this._remotes).indexOf(name) !== -1;\n    }\n    get length() {\n        return Object.keys(this._remotes).length;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Contact.class.js","export default class Remote {\n    constructor(options) {\n        this._origin = options.origin;\n    }\n    get(url, params) {\n        return this.sync({\n            url,\n            method: 'GET',\n            params\n        });\n    }\n    post(url, data) {\n        return this.sync({\n            method: 'POST',\n            url,\n            data\n        });\n    }\n    put(url, data) {\n        return this.sync({\n            method: 'PUT',\n            url,\n            data\n        });\n    }\n    patch(url, data) {\n        return this.sync({\n            method: 'PATCH',\n            url,\n            data\n        });\n    }\n    delete(url, data) {\n        return this.sync({\n            method: 'DELETE',\n            url,\n            data\n        });\n    }\n    sync(options){\n        return this._origin(options);\n    }\n    get origin() {\n        return this._origin;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Remote.class.js","import * as Hooks from './operations/';\nimport Datagent from './datagent';\nimport { mapReceiveHook, mapSendHook } from './utils/';\n\nconst { Model, Contact } = Datagent;\n\nexport {\n    Model,\n    Contact,\n    Hooks,\n    mapReceiveHook,\n    mapSendHook\n}\nexport default {\n    Model,\n    Contact,\n    Hooks,\n    mapReceiveHook,\n    mapSendHook\n}\n\n\n//import Datagent from 'datagent';\n// Datagent.Model\n// Datagent.Contact\n// Datagent.Hooks.respondData\n// Datagent.Hooks.format\n// Datagent.Hooks.formatFor\n// Datagent.Hooks.filter\n// Datagent.Hooks.filterFor\n// Datagent.mapReceiveHook\n// Datagent.mapSendHook\n\n//const Datagent = require('datagent');\n// Datagent.Model\n// Datagent.Contact\n// Datagent.Hooks.respondData\n// Datagent.Hooks.format\n// Datagent.Hooks.formatFor\n// Datagent.Hooks.filter\n// Datagent.Hooks.filterFor\n// Datagent.mapReceiveHook\n// Datagent.mapSendHook\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import { defaults, isDef, isArray } from \"../utils/\";\nimport Schema from \"../classes/Schema.class\";\nimport Hooks from \"../classes/Hooks.class\";\n\nexport function respondData() {\n    return (ctx)=>{\n        const res = ctx.result;\n        if(res.status < 200){\n            const err = new Error(res.message);\n            err.respose = res.response;\n            throw err\n        };\n        ctx.result = res.data;\n        return Promise.resolve(ctx);\n    }\n}\n\nexport function format(schema) {\n    return (ctx) => {\n        schema = isDef(schema) ? schema : ctx.scope.schema;\n        switch (ctx.hook) {\n            case 'after':\n                if (isDef(ctx.result) && isArray(ctx.result)) {\n                    ctx.result = ctx.result.map(item => schema.format(item));\n                } else {\n                    ctx.result = schema.format(ctx.result);\n                } \n                break;\n            case 'before':\n                const data = ctx.args.pop();\n                ctx.args = [schema.format(data), ...ctx.args];\n                break;\n        }\n        return Promise.resolve(ctx);\n    }\n}\n\nexport function filter(fields){\n    return (ctx) => {\n        switch (ctx.hook) {\n            case 'after':\n                if (isDef(ctx.result) && isArray(ctx.result)) {\n                    ctx.result = ctx.result.map(item => ctx.scope.schema.filter(item, fields));\n                } else {\n                    ctx.result = ctx.scope.schema.filter(ctx.result, fields);\n                }\n                break;\n            case 'before':\n                const data = ctx.args.pop();\n                ctx.args = [ctx.scope.schema.filter(data, fields), ...ctx.args];\n                break;\n        }\n        return Promise.resolve(ctx);\n    }\n}\n\nexport function formatFor(field, schema){\n    return (ctx) => {\n        schema = isDef(schema) ? schema : ctx.scope.schema;\n        switch (ctx.hook) {\n            case 'after':\n                if (isArray(ctx.result)){\n                    ctx.result = ctx.result.map(item =>{\n                        item[field] = isDef(item[field]) ? Schema.format(item[field], schema.fieldSet) : schema.default();\n                        return item;\n                    });\n                }else{\n                    ctx.result[field] = isDef(ctx.result[field]) ? Schema.format(ctx.result[field], schema.fieldSet) : schema.default();\n                }\n                break;\n            case 'before':\n                const data = ctx.args.pop();\n                if (isDef(data[field])) data[field] = Schema.format(data[field], schema.fieldSet);\n                else data[field] = schema.default();\n                ctx.args = [data, ...ctx.args];\n                break;\n        }\n        return Promise.resolve(ctx);\n    }\n}\n\nexport function filterFor(field, fields) {\n    return (ctx) => {\n        switch (ctx.hook) {\n            case 'after':\n                if (isArray(ctx.result)) {\n                    ctx.result = ctx.result.map(item => {\n                        item[field] = isDef(item[field]) ? Schema.filter(item[field], fields) : item[field];\n                        return item;\n                    });\n                } else {\n                    ctx.result[field] = isDef(ctx.result[field]) ? Schema.filter(ctx.result[field], fields) : ctx.result[field];\n                }\n                break;\n            case 'before':\n                const data = ctx.args.pop();\n                if (isDef(data[field])) data[field] = Schema.filter(data[field], fields);\n                ctx.args = [data, ...ctx.args];\n                break;\n        }\n        return Promise.resolve(ctx);\n    }\n}\n\nexport function getField(fieldName, action) {\n    return async ctx => {\n        switch (ctx.hook){\n            case 'after':\n                if (isDef(ctx.result[fieldName])){\n                    const fieldVal = ctx.result[fieldName]\n                    const _ctx = await action({ ...ctx, result: fieldVal })\n                    ctx.result[fieldName] = _ctx.result\n                }\n                break;\n            case 'before':\n                const data = ctx.args.pop();\n                if (isDef(data[fieldName])) {\n                    const fieldVal = data[fieldName]\n                    const _ctx = await action({ ...ctx, args: [fieldVal] })\n                    data[fieldName] = _ctx.args[0]\n                    ctx.args = [data, ...ctx.args]\n                }\n                break;\n        }\n        return Promise.resolve(ctx)\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/operations/index.js","import utils from './utils/';\nimport Model from './classes/Model.class';\nimport Hooks from './classes/Hooks.class';\nimport Contact from './classes/Contact.class';\nimport Remote from './classes/Remote.class';\nimport Schema from './classes/Schema.class';\nimport Method from './classes/Method.class';\n\nexport function ModelFactory(options) {\n    const schema = new Schema(options.fields);\n    const methods = {\n        'fetch': Model.prototype.fetch,\n        'find': Model.prototype.find,\n        'save': Model.prototype.save,\n        'delete': Model.prototype.delete,\n        'destroy': Model.prototype.destroy,\n        ...options.methods\n    }\n    //RichModel\n    class DataModel extends Model{\n        constructor(opts){\n            opts = utils.defaults(opts, {\n                name: options.name,\n                url: options.url,\n                contact: options.contact\n            });\n            super(opts);\n            this.initHooks(options.hooks);\n        }\n        initHooks(options){\n            this._hooks = HooksFactory(options);\n        }\n        get schema(){\n            return schema;\n        }\n        static get schema(){\n            return schema;\n        }\n    }\n    Object\n        .keys(methods)\n        .forEach(methodName => {\n            // all hook action magic in here.\n            DataModel.prototype[methodName] = function (...args){\n                const opts = utils.defaults(args[args.length-1]);\n                const hooks = utils.defaults(opts.hooks, { before: [], after: [] });\n\n                const before = Method.concat(hooks.before, this._hooks.getHooks(`${methodName}::before`));\n                const after = Method.concat(this._hooks.getHooks(`${methodName}::after`), hooks.after);\n\n                const method = (ctx) => methods[methodName].apply(ctx.scope, ctx.args).then(data => {\n                    ctx.hook = 'after';\n                    ctx.result = data;\n                    return Promise.resolve(ctx);\n                });\n                const ctx = { scope: this, method: methodName, hook: 'before' };\n\n                return Method.generate([...before, method, ...after])(args, ctx);\n            }\n        });\n\n    return DataModel;\n}\n\nexport function ContactFactory(remotes = {}, defaults) {\n    const contact = new Contact();\n    Object.keys(remotes).forEach((remoteName, index) => {\n        contact.remote(remoteName, new Remote({ origin: remotes[remoteName] }), { default: index == 0 });\n    })\n    if (defaults) contact.default(defaults);\n    return contact;\n}\n\nexport function HooksFactory(options){\n    const hooks = new Hooks();\n    //解析hooks的逻辑，并添加hook记录\n    \n    Object\n        .keys(utils.defaults(options))\n        .forEach(hookName=>{\n            const hook = options[hookName];\n            Object.keys(hook).forEach(aboutName=>{\n                hooks.addHooks(`${hookName}::${aboutName}`, hook[aboutName]);\n            })\n        });\n\n    return hooks;\n}\n\nexport default {\n    Model: ModelFactory,\n    Contact: ContactFactory,\n    Hooks: HooksFactory\n}\n\n\n// WEBPACK FOOTER //\n// ./src/datagent.js","import { isNew, getURL, defaults, isDef } from \"../utils/\";\nimport Contact from './Contact.class';\n\nexport default class Model {\n    constructor(options) {\n        const name = this._name = options.name;\n        if(!isDef(name) || typeof name != 'string'){\n            throw new Error('options.name must be string in Model');\n        }\n        this._url = isDef(options.url) ? options.url : `/${name}`;\n        if (!isDef(options.contact) || options.contact.constructor != Contact){\n            throw new Error('options.contact must be Contact class in Model');\n        }\n        this._contact = options.contact;\n        this._emulateIdKey = typeof options.emulateIdKey === 'undefined' ? false : options.emulateIdKey;\n    }\n    fetch(params, opts) {\n        const { origin } = defaults(opts);\n        return this.remote(origin).get(this._url, params);\n    }\n    find(params, opts) {\n        const { origin } = defaults(opts);\n        const { id } = params;\n        if (this._emulateIdKey) params[this._emulateIdKey] = params.id;\n        else delete params.id\n        return this.remote(origin).get(getURL(this._url, id, this._emulateIdKey), params );\n    }\n    save(data, opts) {\n        const { origin } = defaults(opts);\n        const { id } = data;\n        const url = getURL(this._url, id, this._emulateIdKey);\n        return this.remote(origin)[isNew(data) ? 'post' : 'put'](url, data);\n    }\n    destroy(params, opts) {\n        const { origin } = defaults(opts);\n        const { id } = params;\n        if (this._emulateIdKey) params[this._emulateIdKey] = params.id;\n        else delete params.id\n        return this.remote(origin).delete(getURL(this._url, id, this._emulateIdKey), params);\n    }\n    delete(...args){\n        return this.destroy(...args);\n    }\n    remote(name) {\n        return this._contact.remote(name);\n    }\n    get contact(){\n        return this._contact;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Model.class.js"],"sourceRoot":""}