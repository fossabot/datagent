{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///datagent.js","webpack:///webpack/bootstrap 3069b0fbae7c026f559d","webpack:///./src/utils/index.js","webpack:///./src/classes/Hooks.class.js","webpack:///./src/classes/Method.class.js","webpack:///./src/classes/Schema.class.js","webpack:///./src/classes/Contact.class.js","webpack:///./src/classes/Remote.class.js","webpack:///./src/index.js","webpack:///./src/operations/index.js","webpack:///./src/datagent.js","webpack:///./src/classes/Model.class.js"],"names":["root","factory","exports","module","define","amd","self","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","_defineProperty","obj","key","value","writable","convert","format","arguments","length","undefined","options","defaults","data","fields","concat","keys","result","forEach","fieldName","fieldSet","isDef","formatField","type","default","to","defaultVal","val","Array","mapReceiveHook","methods","__WEBPACK_IMPORTED_MODULE_1__classes_Hooks_class__","ReceiveBehaviour","mapHooks","mapSendHook","SendBehaviour","Error","isArray","hooks","map","hookName","reduce","assign","isNew","getURL","compose","id","url","emulateIdKey","constructor","_len","list","_key","acc","fn","then","Promise","resolve","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","protoProps","staticProps","Hooks","_map","Map","operations","set","size","_ref","method","hook","isReceiveBehaviour","isSendBehaviour","indexOf","_toConsumableArray","arr","arr2","from","__WEBPACK_IMPORTED_MODULE_0__utils___","Method","queues","queue","args","ctx","reject","catch","arg","x","y","filter","schema","Schema","_fieldSet","__WEBPACK_IMPORTED_MODULE_0__Remote_class__","__WEBPACK_IMPORTED_MODULE_1__utils___","Contact","_remotes","_default_remote","remote","opts","has","RangeError","Remote","_origin","origin","params","sync","Model","__WEBPACK_IMPORTED_MODULE_0__operations___","__WEBPACK_IMPORTED_MODULE_1__datagent__","__WEBPACK_IMPORTED_MODULE_2__utils___","respondData","res","status","err","message","respose","response","scope","item","pop","formatFor","field","__WEBPACK_IMPORTED_MODULE_1__classes_Schema_class__","filterFor","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","ModelFactory","__WEBPACK_IMPORTED_MODULE_5__classes_Schema_class__","fetch","__WEBPACK_IMPORTED_MODULE_1__classes_Model_class__","find","save","delete","destroy","DataModel","_Model","contact","_this","getPrototypeOf","initHooks","_hooks","HooksFactory","methodName","before","after","__WEBPACK_IMPORTED_MODULE_6__classes_Method_class__","getHooks","apply","generate","ContactFactory","remotes","__WEBPACK_IMPORTED_MODULE_3__classes_Contact_class__","remoteName","index","__WEBPACK_IMPORTED_MODULE_4__classes_Remote_class__","__WEBPACK_IMPORTED_MODULE_2__classes_Hooks_class__","aboutName","addHooks","_extends","source","__WEBPACK_IMPORTED_MODULE_1__Contact_class__","_name","_url","_contact","_emulateIdKey","_defaults","_defaults2","_defaults3","_defaults4"],"mappings":"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","file":"datagent.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"datagent\"] = factory();\n\telse\n\t\troot[\"datagent\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"datagent\"] = factory();\n\telse\n\t\troot[\"datagent\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 6);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"h\", function() { return isNew; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return getURL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"g\", function() { return isDef; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return isArray; });\n/* unused harmony export isNumber */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return defaults; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return compose; });\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = convert;\n/* unused harmony export formatField */\n/* harmony export (immutable) */ __webpack_exports__[\"i\"] = mapReceiveHook;\n/* harmony export (immutable) */ __webpack_exports__[\"j\"] = mapSendHook;\n/* unused harmony export mapHooks */\n/* unused harmony export awaitTo */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__classes_Method_class__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__classes_Hooks_class__ = __webpack_require__(1);\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\nvar isNew = function isNew(data) {\n    return !isDef(data.id) || !data.id;\n};\nvar getURL = function getURL(url, id, emulateIdKey) {\n    return emulateIdKey ? url : url + (isDef(id) ? '/' + id : '');\n};\nvar isDef = function isDef(val) {\n    return typeof val !== 'undefined';\n};\nvar isArray = function isArray(val) {\n    return val.constructor === Array;\n};\nvar isNumber = function isNumber(val) {\n    return val.constructor === Number;\n};\nvar defaults = function defaults(obj) {\n    var defaults = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var merge = function merge(defaults, obj) {\n        return defaults.constructor === Array ? defaults.concat(obj) : Object.assign(defaults, obj);\n    };\n    return isDef(obj) ? merge(defaults, obj) : defaults;\n};\n\nvar compose = function compose() {\n    for (var _len = arguments.length, list = Array(_len), _key = 0; _key < _len; _key++) {\n        list[_key] = arguments[_key];\n    }\n\n    return function (acc) {\n        return list.reduce(function (acc, fn) {\n            return acc.then(fn);\n        }, Promise.resolve(acc));\n    };\n};\n\n/**\r\n * format code like that:\r\n * ```\r\n * {\r\n *   \"id\": { type: Number, default: null },\r\n *   \"nickname\": { type: String, default: \"\" },\r\n *   \"emial\": { type: String, default:\"\" },\r\n *   \"password\": { type: String, default:\"\" }\r\n * }\r\n * ```\r\n */\nfunction convert() {\n    var format = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var options = arguments[1];\n\n    options = defaults(options, { format: false });\n    return function () {\n        var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [].concat(Object.keys(data), Object.keys(format));\n\n        var result = {};\n        fields.forEach(function (fieldName) {\n            var fieldSet = format[fieldName];\n            if (isDef(data[fieldName])) result[fieldName] = data[fieldName];\n            if (options.format && isDef(fieldSet)) result[fieldName] = formatField(fieldSet.type, fieldSet.default)(data[fieldName]);\n        });\n        return result;\n    };\n}\n\nfunction formatField(to, defaultVal) {\n    return function (val) {\n        var result = void 0;\n        if (typeof defaultVal === \"function\") defaultVal = defaultVal();\n        if (val === null || !isDef(val)) result = defaultVal;else result = to(val);\n        if (to === Array) return val || [];\n        if (val === defaultVal) return val;\n        return result;\n    };\n}\n\nfunction mapReceiveHook(methods, options) {\n    options = defaults(options, __WEBPACK_IMPORTED_MODULE_1__classes_Hooks_class__[\"a\" /* default */].ReceiveBehaviour);\n    return mapHooks(methods, options);\n}\nfunction mapSendHook(methods, options) {\n    options = defaults(options, __WEBPACK_IMPORTED_MODULE_1__classes_Hooks_class__[\"a\" /* default */].SendBehaviour);\n    return mapHooks(methods, options);\n}\nfunction mapHooks(methods) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    if (!isDef(options.methods)) throw new Error('The options must have methods parameter in mapHooks');\n    if (!isArray(options.methods)) throw new Error('The options.methods must be Array in mapHooks');\n    if (!isDef(options.hooks)) throw new Error('The options must have hooks parameter in mapHooks');\n    if (!isArray(options.hooks)) throw new Error('The options.hooks must be Array in mapHooks');\n    var result = options.methods.map(function (hookName) {\n        return _defineProperty({}, hookName, {});\n    }).reduce(Object.assign);\n    Object.keys(result).forEach(function (hookName) {\n        result[hookName] = options.hooks.map(function (hookName) {\n            return _defineProperty({}, hookName, methods);\n        }).reduce(Object.assign);\n    });\n    return result;\n}\nfunction awaitTo(promise) {\n    return promise.then(function (data) {\n        return [null, data];\n    }).catch(function (err) {\n        return [err];\n    });\n}\n\n/* harmony default export */ __webpack_exports__[\"c\"] = ({\n    isNew: isNew,\n    getURL: getURL,\n    isDef: isDef,\n    defaults: defaults,\n    convert: convert,\n    compose: compose,\n    mapSendHook: mapSendHook,\n    mapReceiveHook: mapReceiveHook\n});\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Hooks = function () {\n    function Hooks() {\n        _classCallCheck(this, Hooks);\n\n        this._map = new Map();\n    }\n\n    _createClass(Hooks, [{\n        key: 'addHooks',\n        value: function addHooks(key, operations) {\n            return this._map.set(key, operations);\n        }\n    }, {\n        key: 'getHooks',\n        value: function getHooks(key) {\n            return this._map.get(key);\n        }\n    }, {\n        key: 'each',\n        value: function each(fn) {\n            return this._map.forEach(fn);\n        }\n    }, {\n        key: 'length',\n        get: function get() {\n            return this._map.size;\n        }\n    }], [{\n        key: 'parse',\n        value: function parse(_ref) {\n            var method = _ref.method,\n                hook = _ref.hook;\n            var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'method';\n\n            var result = method + ':' + hook;\n            if (type === 'behaviour') {\n                if (Hooks.isReceiveBehaviour(method, hook)) result = 'receive';\n                if (Hooks.isSendBehaviour(method, hook)) result = 'send';\n            }\n            return result;\n        }\n    }, {\n        key: 'isReceiveBehaviour',\n        value: function isReceiveBehaviour(method, hook) {\n            if (typeof method !== 'string') throw new TypeError('The method must be string in isReceiveBehaviour()');\n            if (typeof hook !== 'string') throw new TypeError('The hook must be string in isReceiveBehaviour()');\n            return Hooks.ReceiveBehaviour.methods.indexOf(method) > -1 && Hooks.ReceiveBehaviour.hooks.indexOf(hook) > -1;\n        }\n    }, {\n        key: 'isSendBehaviour',\n        value: function isSendBehaviour(method, hook) {\n            if (typeof method !== 'string') throw new TypeError('The method must be string in isSendBehaviour()');\n            if (typeof hook !== 'string') throw new TypeError('The hook must be string in isSendBehaviour()');\n            return Hooks.SendBehaviour.methods.indexOf(method) > -1 && Hooks.SendBehaviour.hooks.indexOf(hook) > -1;\n        }\n    }, {\n        key: 'ReceiveBehaviour',\n        get: function get() {\n            return {\n                methods: ['fetch', 'find'],\n                hooks: ['after']\n            };\n        }\n    }, {\n        key: 'SendBehaviour',\n        get: function get() {\n            return {\n                methods: ['save'],\n                hooks: ['before']\n            };\n        }\n    }]);\n\n    return Hooks;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Hooks);\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils___ = __webpack_require__(0);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// import compose from 'koa-compose';\n\n\n/**\r\n * queue call function like that:\r\n * ```\r\n * (ctx, next) => {\r\n *   // ctx is content in all queue functions, like koa.\r\n *   // ctx have $model, arge, result fields\r\n *   // ======================================================\r\n *   // ctx.$model is function scope\r\n *   // ctx.arge is function arguments\r\n *   // ctx.result is this function result\r\n *   next();\r\n * }\r\n * ```\r\n * \r\n * run function return Promise data pattern like that:\r\n * ```\r\n * let err, result;\r\n * [err, result] = Queue.run($model, args, queues);\r\n * if(err) throw err;\r\n * console.log(result);\r\n * ```\r\n * more detail look test file.\r\n */\n\nvar Method = function () {\n    function Method() {\n        _classCallCheck(this, Method);\n    }\n\n    _createClass(Method, null, [{\n        key: 'generate',\n        value: function generate(queues) {\n            var queue = __WEBPACK_IMPORTED_MODULE_0__utils___[\"a\" /* compose */].apply(undefined, _toConsumableArray(queues));\n            return function (args) {\n                var ctx = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n                ctx = Object.assign(ctx, { args: args });\n                return new Promise(function (resolve, reject) {\n                    queue(ctx).then(function (ctx) {\n                        return resolve(ctx.result);\n                    }).catch(reject);\n                });\n            };\n        }\n    }, {\n        key: 'concat',\n        value: function concat() {\n            for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n                args[_key] = arguments[_key];\n            }\n\n            return args.map(function (arg) {\n                return Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"d\" /* defaults */])(arg, []);\n            }).reduce(function (x, y) {\n                return x.concat(y);\n            });\n        }\n    }]);\n\n    return Method;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Method);\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export format */\n/* unused harmony export filter */\n/* unused harmony export schema */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils___ = __webpack_require__(0);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar _format = function _format(data, fieldSet) {\n    return Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"b\" /* convert */])(fieldSet, { format: true })(data);\n};\n\nvar _filter = function _filter(data, fields) {\n    return Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"b\" /* convert */])()(data, fields);\n};\n\nvar schema = function schema(fieldSet) {\n    return Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"b\" /* convert */])(fieldSet, { format: true })({}, Object.keys(fieldSet));\n};\n\nvar Schema = function () {\n    function Schema(fieldSet) {\n        _classCallCheck(this, Schema);\n\n        this._fieldSet = fieldSet;\n    }\n\n    _createClass(Schema, [{\n        key: \"format\",\n        value: function format(data) {\n            return _format(data, this._fieldSet);\n        }\n    }, {\n        key: \"filter\",\n        value: function filter(data) {\n            var fields = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Object.keys(this._fieldSet);\n\n            return _filter(data, fields);\n        }\n    }, {\n        key: \"default\",\n        value: function _default() {\n            return schema(this._fieldSet);\n        }\n    }, {\n        key: \"fieldSet\",\n        get: function get() {\n            return this._fieldSet;\n        }\n\n        // static\n\n    }], [{\n        key: \"format\",\n        value: function format(data, fieldSet) {\n            return _format(data, fieldSet);\n        }\n    }, {\n        key: \"filter\",\n        value: function filter(data, fields) {\n            return _filter(data, fields);\n        }\n    }, {\n        key: \"default\",\n        value: function _default(fieldSet) {\n            return schema(fieldSet);\n        }\n    }]);\n\n    return Schema;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Schema);\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Remote_class__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils___ = __webpack_require__(0);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar Contact = function () {\n    function Contact() {\n        _classCallCheck(this, Contact);\n\n        this._remotes = {};\n        this._default_remote = \"\";\n    }\n\n    _createClass(Contact, [{\n        key: 'remote',\n        value: function remote() {\n            var name = arguments.length <= 0 ? undefined : arguments[0],\n                remote = arguments.length <= 1 ? undefined : arguments[1],\n                opts = Object(__WEBPACK_IMPORTED_MODULE_1__utils___[\"d\" /* defaults */])(arguments.length <= 2 ? undefined : arguments[2], { default: false });\n            if (arguments.length >= 2) {\n                // set remote\n                if (typeof name !== 'string') throw new TypeError('The first arguments must be String');\n                if (remote.constructor !== __WEBPACK_IMPORTED_MODULE_0__Remote_class__[\"a\" /* default */]) throw new TypeError('The second arguments must be Remote');\n                this._remotes[name] = remote;\n                if (opts.default || this.length == 1) this.default(name);\n            } else {\n                name = name ? name : this._default_remote;\n                if (!this.has(name)) throw new RangeError('Remote does not exist ' + name + ' in remote()');\n                // get remote\n                remote = this._remotes[name];\n                return remote;\n            }\n        }\n    }, {\n        key: 'default',\n        value: function _default(name) {\n            if (typeof name !== 'string') throw new TypeError('The name must be string in default()');\n            if (!this.has(name)) throw new RangeError('Remote does not exist ' + name + ' in default()');\n            this._default_remote = name;\n        }\n    }, {\n        key: 'has',\n        value: function has(name) {\n            return Object.keys(this._remotes).indexOf(name) !== -1;\n        }\n    }, {\n        key: 'length',\n        get: function get() {\n            return Object.keys(this._remotes).length;\n        }\n    }]);\n\n    return Contact;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Contact);\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Remote = function () {\n    function Remote(options) {\n        _classCallCheck(this, Remote);\n\n        this._origin = options.origin;\n    }\n\n    _createClass(Remote, [{\n        key: 'get',\n        value: function get(url, params) {\n            return this.sync({\n                url: url,\n                method: 'GET',\n                params: params\n            });\n        }\n    }, {\n        key: 'post',\n        value: function post(url, data) {\n            return this.sync({\n                method: 'POST',\n                url: url,\n                data: data\n            });\n        }\n    }, {\n        key: 'put',\n        value: function put(url, data) {\n            return this.sync({\n                method: 'PUT',\n                url: url,\n                data: data\n            });\n        }\n    }, {\n        key: 'patch',\n        value: function patch(url, data) {\n            return this.sync({\n                method: 'PATCH',\n                url: url,\n                data: data\n            });\n        }\n    }, {\n        key: 'delete',\n        value: function _delete(url, data) {\n            return this.sync({\n                method: 'DELETE',\n                url: url,\n                data: data\n            });\n        }\n    }, {\n        key: 'sync',\n        value: function sync(options) {\n            return this._origin(options);\n        }\n    }, {\n        key: 'origin',\n        get: function get() {\n            return this._origin;\n        }\n    }]);\n\n    return Remote;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Remote);\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Model\", function() { return Model; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Contact\", function() { return Contact; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__operations___ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__datagent__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils___ = __webpack_require__(0);\n/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, \"Hooks\", function() { return __WEBPACK_IMPORTED_MODULE_0__operations___; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"mapReceiveHook\", function() { return __WEBPACK_IMPORTED_MODULE_2__utils___[\"i\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"mapSendHook\", function() { return __WEBPACK_IMPORTED_MODULE_2__utils___[\"j\"]; });\n\n\n\n\nvar Model = __WEBPACK_IMPORTED_MODULE_1__datagent__[\"a\" /* default */].Model,\n    Contact = __WEBPACK_IMPORTED_MODULE_1__datagent__[\"a\" /* default */].Contact;\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    Model: Model,\n    Contact: Contact,\n    Hooks: __WEBPACK_IMPORTED_MODULE_0__operations___,\n    mapReceiveHook: __WEBPACK_IMPORTED_MODULE_2__utils___[\"i\" /* mapReceiveHook */],\n    mapSendHook: __WEBPACK_IMPORTED_MODULE_2__utils___[\"j\" /* mapSendHook */]\n\n    //import Datagent from 'datagent';\n    // Datagent.Model\n    // Datagent.Contact\n    // Datagent.Hooks.respondData\n    // Datagent.Hooks.format\n    // Datagent.Hooks.formatFor\n    // Datagent.Hooks.filter\n    // Datagent.Hooks.filterFor\n    // Datagent.mapReceiveHook\n    // Datagent.mapSendHook\n\n    //const Datagent = require('datagent');\n    // Datagent.Model\n    // Datagent.Contact\n    // Datagent.Hooks.respondData\n    // Datagent.Hooks.format\n    // Datagent.Hooks.formatFor\n    // Datagent.Hooks.filter\n    // Datagent.Hooks.filterFor\n    // Datagent.mapReceiveHook\n    // Datagent.mapSendHook\n\n});\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (immutable) */ __webpack_exports__[\"respondData\"] = respondData;\n/* harmony export (immutable) */ __webpack_exports__[\"format\"] = format;\n/* harmony export (immutable) */ __webpack_exports__[\"filter\"] = filter;\n/* harmony export (immutable) */ __webpack_exports__[\"formatFor\"] = formatFor;\n/* harmony export (immutable) */ __webpack_exports__[\"filterFor\"] = filterFor;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils___ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__classes_Schema_class__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__classes_Hooks_class__ = __webpack_require__(1);\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\n\n\n\nfunction respondData() {\n    return function (ctx) {\n        var res = ctx.result;\n        if (res.status < 200) {\n            var err = new Error(res.message);\n            err.respose = res.response;\n            throw err;\n        };\n        ctx.result = res.data;\n        return Promise.resolve(ctx);\n    };\n}\n\nfunction format(schema) {\n    return function (ctx) {\n        schema = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(schema) ? schema : ctx.scope.schema;\n        switch (ctx.hook) {\n            case 'after':\n                if (Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(ctx.result) && Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"f\" /* isArray */])(ctx.result)) {\n                    ctx.result = ctx.result.map(function (item) {\n                        return schema.format(item);\n                    });\n                } else {\n                    ctx.result = schema.format(ctx.result);\n                }\n                break;\n            case 'before':\n                var data = ctx.args.pop();\n                ctx.args = [schema.format(data)].concat(_toConsumableArray(ctx.args));\n                break;\n        }\n        return Promise.resolve(ctx);\n    };\n}\n\nfunction filter(fields) {\n    return function (ctx) {\n        switch (ctx.hook) {\n            case 'after':\n                if (Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(ctx.result) && Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"f\" /* isArray */])(ctx.result)) {\n                    ctx.result = ctx.result.map(function (item) {\n                        return ctx.scope.schema.filter(item, fields);\n                    });\n                } else {\n                    ctx.result = ctx.scope.schema.filter(ctx.result, fields);\n                }\n                break;\n            case 'before':\n                var data = ctx.args.pop();\n                ctx.args = [ctx.scope.schema.filter(data, fields)].concat(_toConsumableArray(ctx.args));\n                break;\n        }\n        return Promise.resolve(ctx);\n    };\n}\n\nfunction formatFor(field, schema) {\n    return function (ctx) {\n        schema = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(schema) ? schema : ctx.scope.schema;\n        switch (ctx.hook) {\n            case 'after':\n                if (Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"f\" /* isArray */])(ctx.result)) {\n                    ctx.result = ctx.result.map(function (item) {\n                        item[field] = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(item[field]) ? __WEBPACK_IMPORTED_MODULE_1__classes_Schema_class__[\"a\" /* default */].format(item[field], schema.fieldSet) : schema.default();\n                        return item;\n                    });\n                } else {\n                    ctx.result[field] = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(ctx.result[field]) ? __WEBPACK_IMPORTED_MODULE_1__classes_Schema_class__[\"a\" /* default */].format(ctx.result[field], schema.fieldSet) : schema.default();\n                }\n                break;\n            case 'before':\n                var data = ctx.args.pop();\n                if (Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(data[field])) data[field] = __WEBPACK_IMPORTED_MODULE_1__classes_Schema_class__[\"a\" /* default */].format(data[field], schema.fieldSet);else data[field] = schema.default();\n                ctx.args = [data].concat(_toConsumableArray(ctx.args));\n                break;\n        }\n        return Promise.resolve(ctx);\n    };\n}\n\nfunction filterFor(field, fields) {\n    return function (ctx) {\n        switch (ctx.hook) {\n            case 'after':\n                if (Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"f\" /* isArray */])(ctx.result)) {\n                    ctx.result = ctx.result.map(function (item) {\n                        item[field] = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(item[field]) ? __WEBPACK_IMPORTED_MODULE_1__classes_Schema_class__[\"a\" /* default */].filter(item[field], fields) : item[field];\n                        return item;\n                    });\n                } else {\n                    ctx.result[field] = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(ctx.result[field]) ? __WEBPACK_IMPORTED_MODULE_1__classes_Schema_class__[\"a\" /* default */].filter(ctx.result[field], fields) : ctx.result[field];\n                }\n                break;\n            case 'before':\n                var data = ctx.args.pop();\n                if (Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(data[field])) data[field] = __WEBPACK_IMPORTED_MODULE_1__classes_Schema_class__[\"a\" /* default */].filter(data[field], fields);\n                ctx.args = [data].concat(_toConsumableArray(ctx.args));\n                break;\n        }\n        return Promise.resolve(ctx);\n    };\n}\n\n/***/ }),\n/* 8 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export ModelFactory */\n/* unused harmony export ContactFactory */\n/* unused harmony export HooksFactory */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils___ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__classes_Model_class__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__classes_Hooks_class__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__classes_Contact_class__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__classes_Remote_class__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__classes_Schema_class__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__classes_Method_class__ = __webpack_require__(2);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\n\nfunction ModelFactory(options) {\n    var schema = new __WEBPACK_IMPORTED_MODULE_5__classes_Schema_class__[\"a\" /* default */](options.fields);\n    var methods = _extends({\n        'fetch': __WEBPACK_IMPORTED_MODULE_1__classes_Model_class__[\"a\" /* default */].prototype.fetch,\n        'find': __WEBPACK_IMPORTED_MODULE_1__classes_Model_class__[\"a\" /* default */].prototype.find,\n        'save': __WEBPACK_IMPORTED_MODULE_1__classes_Model_class__[\"a\" /* default */].prototype.save,\n        'delete': __WEBPACK_IMPORTED_MODULE_1__classes_Model_class__[\"a\" /* default */].prototype.delete,\n        'destroy': __WEBPACK_IMPORTED_MODULE_1__classes_Model_class__[\"a\" /* default */].prototype.destroy\n    }, options.methods);\n    //RichModel\n\n    var DataModel = function (_Model) {\n        _inherits(DataModel, _Model);\n\n        function DataModel(opts) {\n            _classCallCheck(this, DataModel);\n\n            opts = __WEBPACK_IMPORTED_MODULE_0__utils___[\"c\" /* default */].defaults(opts, {\n                name: options.name,\n                url: options.url,\n                contact: options.contact\n            });\n\n            var _this = _possibleConstructorReturn(this, (DataModel.__proto__ || Object.getPrototypeOf(DataModel)).call(this, opts));\n\n            _this.initHooks(options.hooks);\n            return _this;\n        }\n\n        _createClass(DataModel, [{\n            key: 'initHooks',\n            value: function initHooks(options) {\n                this._hooks = HooksFactory(options);\n            }\n        }, {\n            key: 'schema',\n            get: function get() {\n                return schema;\n            }\n        }], [{\n            key: 'schema',\n            get: function get() {\n                return schema;\n            }\n        }]);\n\n        return DataModel;\n    }(__WEBPACK_IMPORTED_MODULE_1__classes_Model_class__[\"a\" /* default */]);\n\n    Object.keys(methods).forEach(function (methodName) {\n        // all hook action magic in here.\n        DataModel.prototype[methodName] = function () {\n            for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n                args[_key] = arguments[_key];\n            }\n\n            var opts = __WEBPACK_IMPORTED_MODULE_0__utils___[\"c\" /* default */].defaults(args[args.length - 1]);\n            var hooks = __WEBPACK_IMPORTED_MODULE_0__utils___[\"c\" /* default */].defaults(opts.hooks, { before: [], after: [] });\n\n            var before = __WEBPACK_IMPORTED_MODULE_6__classes_Method_class__[\"a\" /* default */].concat(hooks.before, this._hooks.getHooks(methodName + '::before'));\n            var after = __WEBPACK_IMPORTED_MODULE_6__classes_Method_class__[\"a\" /* default */].concat(this._hooks.getHooks(methodName + '::after'), hooks.after);\n\n            var method = function method(ctx) {\n                return methods[methodName].apply(ctx.scope, ctx.args).then(function (data) {\n                    ctx.hook = 'after';\n                    ctx.result = data;\n                    return Promise.resolve(ctx);\n                });\n            };\n            var ctx = { scope: this, method: methodName, hook: 'before' };\n\n            return __WEBPACK_IMPORTED_MODULE_6__classes_Method_class__[\"a\" /* default */].generate([].concat(_toConsumableArray(before), [method], _toConsumableArray(after)))(args, ctx);\n        };\n    });\n\n    return DataModel;\n}\n\nfunction ContactFactory() {\n    var remotes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var defaults = arguments[1];\n\n    var contact = new __WEBPACK_IMPORTED_MODULE_3__classes_Contact_class__[\"a\" /* default */]();\n    Object.keys(remotes).forEach(function (remoteName, index) {\n        contact.remote(remoteName, new __WEBPACK_IMPORTED_MODULE_4__classes_Remote_class__[\"a\" /* default */]({ origin: remotes[remoteName] }), { default: index == 0 });\n    });\n    if (defaults) contact.default(defaults);\n    return contact;\n}\n\nfunction HooksFactory(options) {\n    var hooks = new __WEBPACK_IMPORTED_MODULE_2__classes_Hooks_class__[\"a\" /* default */]();\n    //解析hooks的逻辑，并添加hook记录\n\n    Object.keys(__WEBPACK_IMPORTED_MODULE_0__utils___[\"c\" /* default */].defaults(options)).forEach(function (hookName) {\n        var hook = options[hookName];\n        Object.keys(hook).forEach(function (aboutName) {\n            hooks.addHooks(hookName + '::' + aboutName, hook[aboutName]);\n        });\n    });\n\n    return hooks;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    Model: ModelFactory,\n    Contact: ContactFactory,\n    Hooks: HooksFactory\n});\n\n/***/ }),\n/* 9 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils___ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Contact_class__ = __webpack_require__(4);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar Model = function () {\n    function Model(options) {\n        _classCallCheck(this, Model);\n\n        var name = this._name = options.name;\n        if (!Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(name) || typeof name != 'string') {\n            throw new Error('options.name must be string in Model');\n        }\n        this._url = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(options.url) ? options.url : '/' + name;\n        if (!Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"g\" /* isDef */])(options.contact) || options.contact.constructor != __WEBPACK_IMPORTED_MODULE_1__Contact_class__[\"a\" /* default */]) {\n            throw new Error('options.contact must be Contact class in Model');\n        }\n        this._contact = options.contact;\n        this._emulateIdKey = typeof options.emulateIdKey === 'undefined' ? false : options.emulateIdKey;\n    }\n\n    _createClass(Model, [{\n        key: 'fetch',\n        value: function fetch(params, opts) {\n            var _defaults = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"d\" /* defaults */])(opts),\n                origin = _defaults.origin;\n\n            return this.remote(origin).get(this._url, params);\n        }\n    }, {\n        key: 'find',\n        value: function find(params, opts) {\n            var _defaults2 = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"d\" /* defaults */])(opts),\n                origin = _defaults2.origin;\n\n            var id = params.id;\n\n            if (this._emulateIdKey) params[this._emulateIdKey] = params.id;else delete params.id;\n            return this.remote(origin).get(Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"e\" /* getURL */])(this._url, id, this._emulateIdKey), params);\n        }\n    }, {\n        key: 'save',\n        value: function save(data, opts) {\n            var _defaults3 = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"d\" /* defaults */])(opts),\n                origin = _defaults3.origin;\n\n            var id = data.id;\n\n            var url = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"e\" /* getURL */])(this._url, id, this._emulateIdKey);\n            return this.remote(origin)[Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"h\" /* isNew */])(data) ? 'post' : 'put'](url, data);\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy(params, opts) {\n            var _defaults4 = Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"d\" /* defaults */])(opts),\n                origin = _defaults4.origin;\n\n            var id = params.id;\n\n            if (this._emulateIdKey) params[this._emulateIdKey] = params.id;else delete params.id;\n            return this.remote(origin).delete(Object(__WEBPACK_IMPORTED_MODULE_0__utils___[\"e\" /* getURL */])(this._url, id, this._emulateIdKey), params);\n        }\n    }, {\n        key: 'delete',\n        value: function _delete() {\n            return this.destroy.apply(this, arguments);\n        }\n    }, {\n        key: 'remote',\n        value: function remote(name) {\n            return this._contact.remote(name);\n        }\n    }, {\n        key: 'contact',\n        get: function get() {\n            return this._contact;\n        }\n    }]);\n\n    return Model;\n}();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Model);\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// datagent.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3069b0fbae7c026f559d","import Method from '../classes/Method.class';\r\nimport Hooks from '../classes/Hooks.class';\r\n\r\nexport const isNew = data => !isDef(data.id) || !data.id;\r\nexport const getURL = (url, id, emulateIdKey) => emulateIdKey ? url : (url + (isDef(id) ? `/${id}` : ''));\r\nexport const isDef = val => typeof val !== 'undefined';\r\nexport const isArray = val => val.constructor === Array;\r\nexport const isNumber = val => val.constructor === Number;\r\nexport const defaults = (obj, defaults = {}) =>{\r\n    const merge = (defaults, obj) => defaults.constructor === Array ? defaults.concat(obj) : Object.assign(defaults, obj);\r\n    return isDef(obj) ? merge(defaults, obj) : defaults;\r\n};\r\n\r\nexport const compose = (...list) => acc => list.reduce((acc, fn) => acc.then(fn), Promise.resolve(acc));\r\n\r\n/**\r\n * format code like that:\r\n * ```\r\n * {\r\n *   \"id\": { type: Number, default: null },\r\n *   \"nickname\": { type: String, default: \"\" },\r\n *   \"emial\": { type: String, default:\"\" },\r\n *   \"password\": { type: String, default:\"\" }\r\n * }\r\n * ```\r\n */\r\nexport function convert(format = {}, options){\r\n    options = defaults(options, { format: false });\r\n    return (data = {}, fields = [].concat(Object.keys(data), Object.keys(format)))=>{\r\n        const result = {};\r\n        fields.forEach(fieldName => {\r\n            const fieldSet = format[fieldName];\r\n            if (isDef(data[fieldName])) result[fieldName] = data[fieldName];\r\n            if (options.format && isDef(fieldSet)) result[fieldName] = formatField(fieldSet.type, fieldSet.default)(data[fieldName]);\r\n        });\r\n        return result;\r\n    }\r\n}\r\n\r\nexport function formatField(to, defaultVal){\r\n    return val=>{\r\n        let result;\r\n        if (typeof defaultVal === \"function\") defaultVal = defaultVal();\r\n        if (val === null || !isDef(val)) result = defaultVal;\r\n        else result = to(val);\r\n        if (to === Array) return val || [];\r\n        if (val === defaultVal) return val;\r\n        return result;\r\n    }\r\n}\r\n\r\nexport function mapReceiveHook(methods, options){\r\n    options = defaults(options, Hooks.ReceiveBehaviour);\r\n    return mapHooks(methods, options)\r\n}\r\nexport function mapSendHook(methods, options) {\r\n    options = defaults(options, Hooks.SendBehaviour);\r\n    return mapHooks(methods, options)\r\n}\r\nexport function mapHooks(methods, options={}){\r\n    if (!isDef(options.methods)) throw new Error('The options must have methods parameter in mapHooks');\r\n    if (!isArray(options.methods)) throw new Error('The options.methods must be Array in mapHooks');\r\n    if (!isDef(options.hooks)) throw new Error('The options must have hooks parameter in mapHooks');\r\n    if (!isArray(options.hooks)) throw new Error('The options.hooks must be Array in mapHooks');\r\n    const result = options.methods.map(hookName => { return { [hookName]: {} } }).reduce(Object.assign);\r\n    Object.keys(result).forEach(hookName=>{\r\n        result[hookName] = options.hooks.map(hookName => { return { [hookName]: methods } }).reduce(Object.assign);\r\n    })\r\n    return result;\r\n}\r\nexport function awaitTo(promise) {\r\n    return promise.then(data => {\r\n        return [null, data];\r\n    }).catch(err => [err]);\r\n}\r\n\r\nexport default {\r\n    isNew,\r\n    getURL,\r\n    isDef,\r\n    defaults,\r\n    convert,\r\n    compose,\r\n    mapSendHook,\r\n    mapReceiveHook\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/utils/index.js","class Hooks {\r\n    constructor() {\r\n        this._map = new Map();\r\n    }\r\n    addHooks(key, operations) {\r\n        return this._map.set(key, operations);\r\n    }\r\n    getHooks(key) {\r\n        return this._map.get(key);\r\n    }\r\n    each(fn) {\r\n        return this._map.forEach(fn);\r\n    }\r\n    get length() {\r\n        return this._map.size;\r\n    }\r\n\r\n    static parse({ method, hook }, type = 'method'){\r\n        let result = `${method}:${hook}`;\r\n        if (type === 'behaviour') {\r\n            if (Hooks.isReceiveBehaviour(method, hook)) result = 'receive';\r\n            if (Hooks.isSendBehaviour(method, hook)) result = 'send';\r\n        }\r\n        return result;\r\n    }\r\n\r\n    static get ReceiveBehaviour(){\r\n        return {\r\n            methods: ['fetch','find'],\r\n            hooks: ['after']\r\n        }\r\n    }\r\n    static get SendBehaviour() {\r\n        return {\r\n            methods: ['save'],\r\n            hooks: ['before']\r\n        }\r\n    }\r\n\r\n    static isReceiveBehaviour(method, hook){\r\n        if (typeof method !== 'string') throw new TypeError('The method must be string in isReceiveBehaviour()');\r\n        if (typeof hook !== 'string') throw new TypeError('The hook must be string in isReceiveBehaviour()');\r\n        return Hooks.ReceiveBehaviour.methods.indexOf(method) > -1 && Hooks.ReceiveBehaviour.hooks.indexOf(hook) > -1;\r\n    }\r\n\r\n    static isSendBehaviour(method, hook) {\r\n        if (typeof method !== 'string') throw new TypeError('The method must be string in isSendBehaviour()');\r\n        if (typeof hook !== 'string') throw new TypeError('The hook must be string in isSendBehaviour()');\r\n        return Hooks.SendBehaviour.methods.indexOf(method) > -1 && Hooks.SendBehaviour.hooks.indexOf(hook) > -1;\r\n    }\r\n}\r\n\r\nexport default Hooks;\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Hooks.class.js","// import compose from 'koa-compose';\r\nimport { defaults, compose } from '../utils/';\r\n\r\n/**\r\n * queue call function like that:\r\n * ```\r\n * (ctx, next) => {\r\n *   // ctx is content in all queue functions, like koa.\r\n *   // ctx have $model, arge, result fields\r\n *   // ======================================================\r\n *   // ctx.$model is function scope\r\n *   // ctx.arge is function arguments\r\n *   // ctx.result is this function result\r\n *   next();\r\n * }\r\n * ```\r\n * \r\n * run function return Promise data pattern like that:\r\n * ```\r\n * let err, result;\r\n * [err, result] = Queue.run($model, args, queues);\r\n * if(err) throw err;\r\n * console.log(result);\r\n * ```\r\n * more detail look test file.\r\n */\r\n\r\nclass Method {\r\n    static generate(queues) {\r\n        const queue = compose(...queues);\r\n        return (args, ctx={}) => {\r\n            ctx = Object.assign(ctx, {args});\r\n            return new Promise((resolve, reject) => {\r\n                queue(ctx)\r\n                    .then(ctx=>resolve(ctx.result))\r\n                    .catch(reject);\r\n            });\r\n        }\r\n    }\r\n    static concat(...args){\r\n        return args.map(arg => defaults(arg, [])).reduce((x,y)=>x.concat(y));\r\n    }\r\n}\r\n\r\nexport default Method;\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Method.class.js","import { convert } from \"../utils/\";\r\n\r\nexport const format = (data, fieldSet) => convert(fieldSet, { format:true })(data);\r\nexport const filter = (data, fields) => convert()(data, fields);\r\nexport const schema = fieldSet => convert(fieldSet, { format: true })({}, Object.keys(fieldSet));\r\n\r\nexport default class Schema {\r\n    constructor(fieldSet) {\r\n        this._fieldSet = fieldSet;\r\n    }\r\n    format(data) {\r\n        return format(data, this._fieldSet);\r\n    }\r\n    filter(data, fields = Object.keys(this._fieldSet)){\r\n        return filter(data, fields);\r\n    }\r\n    default(){\r\n        return schema(this._fieldSet);\r\n    }\r\n    get fieldSet() {\r\n        return this._fieldSet;\r\n    }\r\n\r\n    // static\r\n    static format(data, fieldSet){\r\n        return format(data, fieldSet);\r\n    }\r\n    static filter(data, fields) {\r\n        return filter(data, fields);\r\n    }\r\n    static default(fieldSet) {\r\n        return schema(fieldSet);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Schema.class.js","import Remote from './Remote.class';\r\nimport { defaults } from '../utils/';\r\n\r\nexport default class Contact {\r\n    constructor() {\r\n        this._remotes = {};\r\n        this._default_remote = \"\";\r\n    }\r\n    remote(...args) {\r\n        let name = args[0],\r\n            remote = args[1],\r\n            opts = defaults(args[2], { default: false });\r\n        if (args.length >= 2) {\r\n            // set remote\r\n            if (typeof name !== 'string') throw new TypeError('The first arguments must be String');\r\n            if (remote.constructor !== Remote) throw new TypeError('The second arguments must be Remote');\r\n            this._remotes[name] = remote;\r\n            if (opts.default || this.length == 1) this.default(name);\r\n        } else {\r\n            name = name ? name : this._default_remote;\r\n            if (!this.has(name)) throw new RangeError(`Remote does not exist ${name} in remote()`);\r\n            // get remote\r\n            remote = this._remotes[name];\r\n            return remote;\r\n        }\r\n    }\r\n    default(name) {\r\n        if(typeof name !== 'string') throw new TypeError('The name must be string in default()');\r\n        if (!this.has(name)) throw new RangeError(`Remote does not exist ${name} in default()`);\r\n        this._default_remote = name;\r\n    }\r\n    has(name) {\r\n        return Object.keys(this._remotes).indexOf(name) !== -1;\r\n    }\r\n    get length() {\r\n        return Object.keys(this._remotes).length;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Contact.class.js","export default class Remote {\r\n    constructor(options) {\r\n        this._origin = options.origin;\r\n    }\r\n    get(url, params) {\r\n        return this.sync({\r\n            url,\r\n            method: 'GET',\r\n            params\r\n        });\r\n    }\r\n    post(url, data) {\r\n        return this.sync({\r\n            method: 'POST',\r\n            url,\r\n            data\r\n        });\r\n    }\r\n    put(url, data) {\r\n        return this.sync({\r\n            method: 'PUT',\r\n            url,\r\n            data\r\n        });\r\n    }\r\n    patch(url, data) {\r\n        return this.sync({\r\n            method: 'PATCH',\r\n            url,\r\n            data\r\n        });\r\n    }\r\n    delete(url, data) {\r\n        return this.sync({\r\n            method: 'DELETE',\r\n            url,\r\n            data\r\n        });\r\n    }\r\n    sync(options){\r\n        return this._origin(options);\r\n    }\r\n    get origin() {\r\n        return this._origin;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Remote.class.js","import * as Hooks from './operations/';\r\nimport Datagent from './datagent';\r\nimport { mapReceiveHook, mapSendHook } from './utils/';\r\n\r\nconst { Model, Contact } = Datagent;\r\n\r\nexport {\r\n    Model,\r\n    Contact,\r\n    Hooks,\r\n    mapReceiveHook,\r\n    mapSendHook\r\n}\r\nexport default {\r\n    Model,\r\n    Contact,\r\n    Hooks,\r\n    mapReceiveHook,\r\n    mapSendHook\r\n}\r\n\r\n\r\n//import Datagent from 'datagent';\r\n// Datagent.Model\r\n// Datagent.Contact\r\n// Datagent.Hooks.respondData\r\n// Datagent.Hooks.format\r\n// Datagent.Hooks.formatFor\r\n// Datagent.Hooks.filter\r\n// Datagent.Hooks.filterFor\r\n// Datagent.mapReceiveHook\r\n// Datagent.mapSendHook\r\n\r\n//const Datagent = require('datagent');\r\n// Datagent.Model\r\n// Datagent.Contact\r\n// Datagent.Hooks.respondData\r\n// Datagent.Hooks.format\r\n// Datagent.Hooks.formatFor\r\n// Datagent.Hooks.filter\r\n// Datagent.Hooks.filterFor\r\n// Datagent.mapReceiveHook\r\n// Datagent.mapSendHook\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import { defaults, isDef, isArray } from \"../utils/\";\r\nimport Schema from \"../classes/Schema.class\";\r\nimport Hooks from \"../classes/Hooks.class\";\r\n\r\nexport function respondData() {\r\n    return (ctx)=>{\r\n        const res = ctx.result;\r\n        if(res.status < 200){\r\n            const err = new Error(res.message);\r\n            err.respose = res.response;\r\n            throw err\r\n        };\r\n        ctx.result = res.data;\r\n        return Promise.resolve(ctx);\r\n    }\r\n}\r\n\r\nexport function format(schema) {\r\n    return (ctx) => {\r\n        schema = isDef(schema) ? schema : ctx.scope.schema;\r\n        switch (ctx.hook) {\r\n            case 'after':\r\n                if (isDef(ctx.result) && isArray(ctx.result)){\r\n                    ctx.result = ctx.result.map(item => schema.format(item));\r\n                }else{\r\n                    ctx.result = schema.format(ctx.result);\r\n                }\r\n                break;\r\n            case 'before':\r\n                const data = ctx.args.pop();\r\n                ctx.args = [schema.format(data), ...ctx.args];\r\n                break;\r\n        }\r\n        return Promise.resolve(ctx);\r\n    }\r\n}\r\n\r\nexport function filter(fields){\r\n    return (ctx) => {\r\n        switch (ctx.hook) {\r\n            case 'after':\r\n                if (isDef(ctx.result) && isArray(ctx.result)) {\r\n                    ctx.result = ctx.result.map(item => ctx.scope.schema.filter(item, fields));\r\n                } else {\r\n                    ctx.result = ctx.scope.schema.filter(ctx.result, fields);\r\n                }\r\n                break;\r\n            case 'before':\r\n                const data = ctx.args.pop();\r\n                ctx.args = [ctx.scope.schema.filter(data, fields), ...ctx.args];\r\n                break;\r\n        }\r\n        return Promise.resolve(ctx);\r\n    }\r\n}\r\n\r\nexport function formatFor(field, schema){\r\n    return (ctx) => {\r\n        schema = isDef(schema) ? schema : ctx.scope.schema;\r\n        switch (ctx.hook) {\r\n            case 'after':\r\n                if (isArray(ctx.result)){\r\n                    ctx.result = ctx.result.map(item =>{\r\n                        item[field] = isDef(item[field]) ? Schema.format(item[field], schema.fieldSet) : schema.default();\r\n                        return item;\r\n                    });\r\n                }else{\r\n                    ctx.result[field] = isDef(ctx.result[field]) ? Schema.format(ctx.result[field], schema.fieldSet) : schema.default();\r\n                }\r\n                break;\r\n            case 'before':\r\n                const data = ctx.args.pop();\r\n                if (isDef(data[field])) data[field] = Schema.format(data[field], schema.fieldSet);\r\n                else data[field] = schema.default();\r\n                ctx.args = [data, ...ctx.args];\r\n                break;\r\n        }\r\n        return Promise.resolve(ctx);\r\n    }\r\n}\r\n\r\nexport function filterFor(field, fields) {\r\n    return (ctx) => {\r\n        switch (ctx.hook) {\r\n            case 'after':\r\n                if (isArray(ctx.result)) {\r\n                    ctx.result = ctx.result.map(item => {\r\n                        item[field] = isDef(item[field]) ? Schema.filter(item[field], fields) : item[field];\r\n                        return item;\r\n                    });\r\n                } else {\r\n                    ctx.result[field] = isDef(ctx.result[field]) ? Schema.filter(ctx.result[field], fields) : ctx.result[field];\r\n                }\r\n                break;\r\n            case 'before':\r\n                const data = ctx.args.pop();\r\n                if (isDef(data[field])) data[field] = Schema.filter(data[field], fields);\r\n                ctx.args = [data, ...ctx.args];\r\n                break;\r\n        }\r\n        return Promise.resolve(ctx);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/operations/index.js","import utils from './utils/';\r\nimport Model from './classes/Model.class';\r\nimport Hooks from './classes/Hooks.class';\r\nimport Contact from './classes/Contact.class';\r\nimport Remote from './classes/Remote.class';\r\nimport Schema from './classes/Schema.class';\r\nimport Method from './classes/Method.class';\r\n\r\nexport function ModelFactory(options) {\r\n    const schema = new Schema(options.fields);\r\n    const methods = {\r\n        'fetch': Model.prototype.fetch,\r\n        'find': Model.prototype.find,\r\n        'save': Model.prototype.save,\r\n        'delete': Model.prototype.delete,\r\n        'destroy': Model.prototype.destroy,\r\n        ...options.methods\r\n    }\r\n    //RichModel\r\n    class DataModel extends Model{\r\n        constructor(opts){\r\n            opts = utils.defaults(opts, {\r\n                name: options.name,\r\n                url: options.url,\r\n                contact: options.contact\r\n            });\r\n            super(opts);\r\n            this.initHooks(options.hooks);\r\n        }\r\n        initHooks(options){\r\n            this._hooks = HooksFactory(options);\r\n        }\r\n        get schema(){\r\n            return schema;\r\n        }\r\n        static get schema(){\r\n            return schema;\r\n        }\r\n    }\r\n    Object\r\n        .keys(methods)\r\n        .forEach(methodName => {\r\n            // all hook action magic in here.\r\n            DataModel.prototype[methodName] = function (...args){\r\n                const opts = utils.defaults(args[args.length-1]);\r\n                const hooks = utils.defaults(opts.hooks, { before: [], after: [] });\r\n\r\n                const before = Method.concat(hooks.before, this._hooks.getHooks(`${methodName}::before`));\r\n                const after = Method.concat(this._hooks.getHooks(`${methodName}::after`), hooks.after);\r\n\r\n                const method = (ctx) => methods[methodName].apply(ctx.scope, ctx.args).then(data => {\r\n                    ctx.hook = 'after';\r\n                    ctx.result = data;\r\n                    return Promise.resolve(ctx);\r\n                });\r\n                const ctx = { scope: this, method: methodName, hook: 'before' };\r\n\r\n                return Method.generate([...before, method, ...after])(args, ctx);\r\n            }\r\n        });\r\n\r\n    return DataModel;\r\n}\r\n\r\nexport function ContactFactory(remotes = {}, defaults) {\r\n    const contact = new Contact();\r\n    Object.keys(remotes).forEach((remoteName, index) => {\r\n        contact.remote(remoteName, new Remote({ origin: remotes[remoteName] }), { default: index == 0 });\r\n    })\r\n    if (defaults) contact.default(defaults);\r\n    return contact;\r\n}\r\n\r\nexport function HooksFactory(options){\r\n    const hooks = new Hooks();\r\n    //解析hooks的逻辑，并添加hook记录\r\n    \r\n    Object\r\n        .keys(utils.defaults(options))\r\n        .forEach(hookName=>{\r\n            const hook = options[hookName];\r\n            Object.keys(hook).forEach(aboutName=>{\r\n                hooks.addHooks(`${hookName}::${aboutName}`, hook[aboutName]);\r\n            })\r\n        });\r\n\r\n    return hooks;\r\n}\r\n\r\nexport default {\r\n    Model: ModelFactory,\r\n    Contact: ContactFactory,\r\n    Hooks: HooksFactory\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/datagent.js","import { isNew, getURL, defaults, isDef } from \"../utils/\";\r\nimport Contact from './Contact.class';\r\n\r\nexport default class Model {\r\n    constructor(options) {\r\n        const name = this._name = options.name;\r\n        if(!isDef(name) || typeof name != 'string'){\r\n            throw new Error('options.name must be string in Model');\r\n        }\r\n        this._url = isDef(options.url) ? options.url : `/${name}`;\r\n        if (!isDef(options.contact) || options.contact.constructor != Contact){\r\n            throw new Error('options.contact must be Contact class in Model');\r\n        }\r\n        this._contact = options.contact;\r\n        this._emulateIdKey = typeof options.emulateIdKey === 'undefined' ? false : options.emulateIdKey;\r\n    }\r\n    fetch(params, opts) {\r\n        const { origin } = defaults(opts);\r\n        return this.remote(origin).get(this._url, params);\r\n    }\r\n    find(params, opts) {\r\n        const { origin } = defaults(opts);\r\n        const { id } = params;\r\n        if (this._emulateIdKey) params[this._emulateIdKey] = params.id;\r\n        else delete params.id\r\n        return this.remote(origin).get(getURL(this._url, id, this._emulateIdKey), params );\r\n    }\r\n    save(data, opts) {\r\n        const { origin } = defaults(opts);\r\n        const { id } = data;\r\n        const url = getURL(this._url, id, this._emulateIdKey);\r\n        return this.remote(origin)[isNew(data) ? 'post' : 'put'](url, data);\r\n    }\r\n    destroy(params, opts) {\r\n        const { origin } = defaults(opts);\r\n        const { id } = params;\r\n        if (this._emulateIdKey) params[this._emulateIdKey] = params.id;\r\n        else delete params.id\r\n        return this.remote(origin).delete(getURL(this._url, id, this._emulateIdKey), params);\r\n    }\r\n    delete(...args){\r\n        return this.destroy(...args);\r\n    }\r\n    remote(name) {\r\n        return this._contact.remote(name);\r\n    }\r\n    get contact(){\r\n        return this._contact;\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/classes/Model.class.js"],"sourceRoot":""}